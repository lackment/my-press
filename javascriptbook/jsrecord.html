<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>条件类型 | 文档</title>
    <meta name="generator" content="VuePress 1.9.9">
    
    <meta name="description" content="文档">
    
    <link rel="preload" href="/my-press/assets/css/0.styles.7f83d3f4.css" as="style"><link rel="preload" href="/my-press/assets/js/app.8d356eaa.js" as="script"><link rel="preload" href="/my-press/assets/js/3.b7feb53a.js" as="script"><link rel="preload" href="/my-press/assets/js/1.6aad5a55.js" as="script"><link rel="preload" href="/my-press/assets/js/11.c69e7abf.js" as="script"><link rel="prefetch" href="/my-press/assets/js/10.45591ef3.js"><link rel="prefetch" href="/my-press/assets/js/4.2f37efea.js"><link rel="prefetch" href="/my-press/assets/js/5.dd08b70e.js"><link rel="prefetch" href="/my-press/assets/js/6.22f72ec1.js"><link rel="prefetch" href="/my-press/assets/js/7.18667ebb.js"><link rel="prefetch" href="/my-press/assets/js/8.5817a6d3.js"><link rel="prefetch" href="/my-press/assets/js/9.7f072f42.js">
    <link rel="stylesheet" href="/my-press/assets/css/0.styles.7f83d3f4.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-e497687c><div data-v-e497687c><div class="password-shadow password-wrapper-out" style="display:none;" data-v-53cef1a9 data-v-e497687c data-v-e497687c><h3 class="title" data-v-53cef1a9>文档</h3> <p class="description" data-v-53cef1a9>文档</p> <label id="box" class="inputBox" data-v-53cef1a9><input type="password" value="" data-v-53cef1a9> <span data-v-53cef1a9>Konck! Knock!</span> <button data-v-53cef1a9>OK</button></label> <div class="footer" data-v-53cef1a9><span data-v-53cef1a9><i class="iconfont reco-theme" data-v-53cef1a9></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-53cef1a9>vuePress-theme-reco</a></span> <span data-v-53cef1a9><i class="iconfont reco-copyright" data-v-53cef1a9></i> <a data-v-53cef1a9><!---->
          
        <!---->
        2023
      </a></span></div></div> <div class="hide" data-v-e497687c><header class="navbar" data-v-e497687c><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/my-press/" class="home-link router-link-active"><!----> <span class="site-name">文档</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/my-press/" class="nav-link"><i class="undefined"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      测试
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/mqyqingfeng" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://juejin.cn/user/712139234359182/posts" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  掘金
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-e497687c></div> <aside class="sidebar" data-v-e497687c><div class="personal-info-wrapper" data-v-794eb4f4 data-v-e497687c><!----> <!----> <div class="num" data-v-794eb4f4><div data-v-794eb4f4><h3 data-v-794eb4f4>2</h3> <h6 data-v-794eb4f4>文章</h6></div> <div data-v-794eb4f4><h3 data-v-794eb4f4>0</h3> <h6 data-v-794eb4f4>标签</h6></div></div> <ul class="social-links" data-v-794eb4f4></ul> <hr data-v-794eb4f4></div> <nav class="nav-links"><div class="nav-item"><a href="/my-press/" class="nav-link"><i class="undefined"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      测试
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/mqyqingfeng" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://juejin.cn/user/712139234359182/posts" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  掘金
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav> <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><a href="/my-press/" class="sidebar-heading clickable router-link-active open"><span>欢迎学习</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/my-press/" aria-current="page" class="sidebar-link">学前必读</a></li></ul></section></li><li><a href="/my-press/javascriptbook/jsrecord.html" aria-current="page" class="active sidebar-link">javacript学习</a></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-53cef1a9 data-v-e497687c><h3 class="title" data-v-53cef1a9>条件类型</h3> <!----> <label id="box" class="inputBox" data-v-53cef1a9><input type="password" value="" data-v-53cef1a9> <span data-v-53cef1a9>Konck! Knock!</span> <button data-v-53cef1a9>OK</button></label> <div class="footer" data-v-53cef1a9><span data-v-53cef1a9><i class="iconfont reco-theme" data-v-53cef1a9></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-53cef1a9>vuePress-theme-reco</a></span> <span data-v-53cef1a9><i class="iconfont reco-copyright" data-v-53cef1a9></i> <a data-v-53cef1a9><!---->
          
        <!---->
        2023
      </a></span></div></div> <div data-v-e497687c><div data-v-e497687c><main class="page"><section style="display:;"><div class="page-title"><h1 class="title">条件类型</h1> <div data-v-6ce10b67><i class="iconfont reco-account" data-v-6ce10b67><span data-v-6ce10b67>冴羽</span></i> <i class="iconfont reco-date" data-v-6ce10b67><span data-v-6ce10b67>2021/12/12</span></i> <!----> <!----></div></div> <div class="theme-reco-content content__default"><h3 id="隐式转换"><a href="#隐式转换" class="header-anchor">#</a> 隐式转换</h3> <p>当运算符的两端的数据类型不一样时，编译器会自动的将两端的数据转换成同一种类型来计算，这个过程就叫做隐式转换</p> <table><thead><tr><th style="text-align:center;">转换目标</th> <th style="text-align:center;">运算符</th> <th style="text-align:center;">备注</th></tr></thead> <tbody><tr><td style="text-align:center;">数据转换为string类型</td> <td style="text-align:center;">+ 字符串</td> <td style="text-align:center;">当'+'运算符的一端的一个数据类型为string类型时，就会将另外一端的数据变为string类型，然后进行字符串的拼接</td></tr> <tr><td style="text-align:center;">数据转换为number类型</td> <td style="text-align:center;">++/-- (自增自减运算符)<br>+ - * / % (算术运算符)<br>&gt; &lt;  &gt;=  &lt;= ==  !=  ===  !== (关系运算符)</td> <td style="text-align:center;">当使用了上述计算符时，会将两端数据转为Number类型，再进行计算</td></tr> <tr><td style="text-align:center;">数据转换为boolean类型</td> <td style="text-align:center;">！</td> <td style="text-align:center;">当使用！运算符时，会先将！运算符后面的数据转换为Boolean类型，然后再将结果反转</td></tr></tbody></table> <p>引用类型的数据（Object、Array和function等）进行运算的时候会先执行valueOf方法得到数据的原始类型，再通过toString方法转换成字符串类型，最终通过这个字符串转换成其他的基本类型数据。</p> <ul><li>对象类型（{a:2}）：通过valueOf方法得到原始数据（{a:2}）再通过toString方法得到字符串（'[object Object]'）,实际上就是数据的类型</li> <li>数组类型（[1,2]）: 通过valueOf方法得到原始数据（[1,2]）再通过toString方法得到字符串（’12‘），实际上数组的toString方法调用了数组的join方法来组合数组数据</li> <li>函数类型（function(){}）:通过valueOf方法得到原始数据（function(){}）再通过toString方法得到字符串（function(){}）</li></ul> <p>特殊的点</p> <ul><li>number(undefined)得到NaN</li> <li>number(null)得到0</li> <li>Boolean([])得到true</li> <li>Boolean({})得到true</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token string">'1'</span><span class="token operator">+</span><span class="token keyword">undefined</span>  <span class="token comment">//'1undefined'</span>
<span class="token string">'1'</span><span class="token operator">+</span><span class="token keyword">null</span> <span class="token comment">//'1null'</span>

<span class="token number">1</span><span class="token operator">+</span><span class="token keyword">undefined</span> <span class="token comment">// NaN  1+Number(undefined)</span>
<span class="token number">1</span><span class="token operator">+</span><span class="token keyword">null</span>  <span class="token comment">// 1 1+Number(null)=&gt; 1+0</span>
<span class="token number">1</span><span class="token operator">+</span><span class="token boolean">true</span> <span class="token comment">// 2 1+Number(true) =&gt; 1+1</span>

<span class="token string">'2'</span><span class="token operator">&gt;</span><span class="token string">'10'</span> <span class="token comment">// true 关系运算符的两端都是字符串类型时，会将其转为Ascall码来比较</span>
<span class="token string">'abc'</span> <span class="token operator">&gt;</span> <span class="token string">'aad'</span> <span class="token comment">//true</span>

<span class="token comment">//无视规则的一些转换</span>
<span class="token keyword">null</span> <span class="token operator">==</span> <span class="token keyword">undefined</span> <span class="token comment">//true</span>
<span class="token number">NaN</span> <span class="token operator">==</span> <span class="token number">NaN</span> <span class="token comment">//false</span>

<span class="token comment">//复杂类型的转换</span>
<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">//false 引用地址不同</span>
<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token operator">!</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">//true Number('') == !Boolean([]) =&gt;Number('') == Number(false) =&gt; 0 == 0</span>

<span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token operator">==</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">//false 引用地址不同</span>
<span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token operator">==</span> <span class="token operator">!</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">//false   Number('[object,Object]') == !Boolean({}) =&gt; Number('[object,Object]') == Number(false)                     =&gt; NaN == 0</span>

<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token comment">// true   Number('') == 0 =&gt; 0 == 0</span>
<span class="token operator">!</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token comment">// true  !Boolean([]) == 0 =&gt; Number(false) == 0 =&gt; 0==0</span>
 
<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">//得到'' 两端都会被转化字符串类型，然后进行字符串的连接</span>
<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">//得到'[object Object]' </span>
<span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token operator">+</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">//得到0  这是因为这段代码被解析为{}; +[] ,前面的对象为看为一个代码块</span>
<span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token operator">+</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">//NaN</span>

</code></pre></div><h3 id="数值的扩展"><a href="#数值的扩展" class="header-anchor">#</a> 数值的扩展</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code>Math<span class="token punctuation">.</span><span class="token function">trunc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//获取数值除去小数部分的值</span>
Math<span class="token punctuation">.</span><span class="token function">sign</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//判断一个值是正数、0、负数</span>
Math<span class="token punctuation">.</span><span class="token function">cbrt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">//得到这个值得立方根</span>
Math<span class="token punctuation">.</span><span class="token function">hypot</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">//得到所有数据平方和的平方根</span>
<span class="token number">2</span><span class="token operator">**</span><span class="token number">2</span>  即<span class="token number">2</span>的平方
Math<span class="token punctuation">.</span><span class="token function">ceil</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">//向上取整</span>
Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">//向下取整</span>
Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//取0-1之间的随机数</span>
num<span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token comment">//保留小数点后两位的值</span>
</code></pre></div><h3 id="对象的扩展"><a href="#对象的扩展" class="header-anchor">#</a> 对象的扩展</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code>Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//继承一个对象</span>
<span class="token keyword">const</span> b <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token function">getSData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> a <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span> <span class="token comment">//此时a.__proto__ === b.prototype 原型链构成可实现对象的继承</span>
（<span class="token number">1</span>）属性名的简写
 <span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token string">'s'</span>
 <span class="token keyword">let</span> y <span class="token operator">=</span> <span class="token punctuation">{</span>                  <span class="token keyword">let</span> y <span class="token operator">=</span> <span class="token punctuation">{</span>
     <span class="token parameter">x</span>         <span class="token operator">=&gt;</span>                x <span class="token operator">:</span> <span class="token string">'s'</span>
       <span class="token punctuation">}</span>                              <span class="token punctuation">}</span>
 <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token function">表达式作为属性名</span><span class="token punctuation">(</span>要加上<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span>
 <span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token punctuation">{</span>
   <span class="token punctuation">[</span><span class="token string">'ac'</span><span class="token operator">+</span><span class="token string">'b'</span><span class="token punctuation">]</span> <span class="token operator">:</span> <span class="token string">'x'</span>
 <span class="token punctuation">}</span>

Object<span class="token punctuation">.</span><span class="token function">is</span><span class="token punctuation">(</span>判断传入的两个值是否相等，当比’<span class="token operator">===</span>‘更好，能判断<span class="token constant">NAN</span><span class="token operator">==</span><span class="token constant">NAN</span><span class="token punctuation">)</span>
<span class="token keyword">let</span>  x <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">let</span> y <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
Object<span class="token punctuation">.</span><span class="token function">is</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span> <span class="token comment">//false</span>

Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>将目标对象内所有可枚举的属性复制到源对象中<span class="token punctuation">)</span><span class="token operator">:</span>
注意：
<span class="token comment">//此方法会返回一个对象，返回的这个对象和源对象相同</span>
<span class="token comment">//此方法是浅复制，复制得到的对象改变时，原对象也会进行改变，可选择lodash库中的_.defalutsDeep()</span>
<span class="token comment">//当合并的对象拥有共同的属性名时，此属性会后面的对象的覆盖</span>
<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>合并多个对象（不采用这个方法）
<span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token punctuation">{</span>
   <span class="token literal-property property">a</span><span class="token operator">:</span><span class="token string">'a'</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span>  y <span class="token operator">=</span> <span class="token punctuation">{</span>
   <span class="token literal-property property">b</span><span class="token operator">:</span><span class="token string">'b'</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> u <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">c</span><span class="token operator">:</span><span class="token string">'c'</span>
<span class="token punctuation">}</span>
Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">,</span>c<span class="token punctuation">)</span> <span class="token comment">// x = {a:'a',b:'b' ,c:'c'}</span>
<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>为一个对象添加多个属性或者方法
<span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token string">'c'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token string">'d'</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">let</span> y <span class="token operator">=</span> <span class="token punctuation">{</span>
            <span class="token function">c</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>sdads<span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">let</span> t <span class="token operator">=</span> <span class="token punctuation">{</span>
           <span class="token literal-property property">c</span><span class="token operator">:</span><span class="token string">'e'</span>
        <span class="token punctuation">}</span>
<span class="token keyword">let</span> i <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>

对象的枚举属性（对象中可以循环得到的属性）：
每一个属性都有一个enumerable属性，当这个属性为<span class="token boolean">true</span>时，此对象可以被循环

对象的循环：
（<span class="token number">1</span>）循环的顺序
  <span class="token function">先循环属性名为数字，在循环属性名为字符串的，最后循环sysmbol类型的</span>
 <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>循环方法
  <span class="token keyword">for</span><span class="token operator">...</span><span class="token keyword">in</span> <span class="token comment">//循环对象中所有可枚举的属性，包括对象自身和继承得到的属性，所以一般不用此方法循环对象</span>
  Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//返回一个数组，数组内是对象的属性名，只包括对象自身的属性（可枚举属性），一般用此方法循环对象</span>
  Object<span class="token punctuation">.</span><span class="token function">getOwnPropertyNames</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//返回一个数组，包括此对象自身内所有属性，包括不可枚举的属性</span>

<span class="token function">setPrototypeOf</span><span class="token punctuation">(</span>设置一个对象的原型<span class="token punctuation">)</span>：

<span class="token keyword">let</span> a <span class="token operator">=</span>  <span class="token punctuation">{</span>
    
<span class="token punctuation">}</span>
<span class="token keyword">let</span> b <span class="token operator">=</span> <span class="token punctuation">{</span>
     <span class="token literal-property property">a</span><span class="token operator">:</span><span class="token string">'c'</span>
<span class="token punctuation">}</span>
Object<span class="token punctuation">.</span><span class="token function">setPrototype</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>b<span class="token punctuation">)</span>
等同于
a<span class="token punctuation">.</span>_proto_ <span class="token operator">=</span> b
所以 a<span class="token punctuation">.</span>a <span class="token comment">// 'c'</span>

<span class="token function">getPrototypeOf</span><span class="token punctuation">(</span>Object<span class="token punctuation">)</span> <span class="token comment">//获取一个对象的原型</span>

Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span> <span class="token comment">//返回一个数组，数组内是对象的属性名（不包括继承来的属性）</span>
Object<span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span><span class="token comment">//放回一个数组，包含对象的属性值（不包括继承来的属性）</span>

Object<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span> <span class="token comment">//放回一个数组，数组内每一项是[属性名：属性值],可用来将对象转化为map对象</span>

<span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token punctuation">{</span>
     <span class="token literal-property property">c</span><span class="token operator">:</span><span class="token string">'c'</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token literal-property property">扩展运算符</span><span class="token operator">:</span>
（<span class="token number">1</span>）用于解构赋值
<span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">a</span><span class="token operator">:</span><span class="token string">'a'</span>
    <span class="token literal-property property">b</span><span class="token operator">:</span><span class="token string">'b'</span>
    <span class="token literal-property property">c</span><span class="token operator">:</span><span class="token string">&quot;c&quot;</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> <span class="token punctuation">{</span>a<span class="token punctuation">,</span><span class="token operator">...</span>z<span class="token punctuation">}</span> <span class="token operator">=</span> a
a <span class="token comment">// 'a'</span>
z <span class="token comment">//{</span>
   <span class="token literal-property property">b</span><span class="token operator">:</span><span class="token string">'b'</span>
   <span class="token literal-property property">c</span><span class="token operator">:</span><span class="token string">&quot;c&quot;</span>
<span class="token punctuation">}</span>
解构时，扩展运算符只能用在后面

<span class="token function">（2）复制对象</span><span class="token punctuation">(</span>浅复制，且复制的只有被复制对象本身的属性，不包括其继承来的属性<span class="token punctuation">)</span>
<span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token punctuation">{</span>
     <span class="token literal-property property">a</span><span class="token operator">:</span><span class="token string">'c'</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> b <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token operator">...</span>a<span class="token punctuation">}</span>

（<span class="token number">3</span>）合并多个对象
<span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token punctuation">{</span>
     <span class="token literal-property property">a</span><span class="token operator">:</span><span class="token string">'a'</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> b <span class="token operator">=</span> <span class="token punctuation">{</span>
     <span class="token literal-property property">b</span><span class="token operator">:</span><span class="token string">'b'</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> c <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token operator">...</span>a<span class="token punctuation">,</span><span class="token operator">...</span>b<span class="token punctuation">}</span>
   
对象的深拷贝：
（<span class="token number">1</span>）最简单的：
<span class="token keyword">let</span> b <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">a</span><span class="token operator">:</span><span class="token string">&quot;c&quot;</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> z <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//既将b对象先转为字符串复制进栈内存中，在转为对象，丢进堆内存中</span>
 缺点：<span class="token number">1</span>、无法拷贝对象内的正则、函数和Symbol
      <span class="token number">2</span>、循环引用会报错
      
 （<span class="token number">2</span>）利用递归进行拷贝：
 <span class="token keyword">function</span> <span class="token function">deepClone</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> hash <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WeakMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span> obj<span class="token punctuation">;</span> <span class="token comment">// 如果是null或者undefined我就不进行拷贝操作</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token keyword">instanceof</span> <span class="token class-name">Date</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token keyword">instanceof</span> <span class="token class-name">RegExp</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 可能是对象或者普通的值  如果是函数的话是不需要深拷贝</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> obj <span class="token operator">!==</span> <span class="token string">&quot;object&quot;</span><span class="token punctuation">)</span> <span class="token keyword">return</span> obj<span class="token punctuation">;</span>
  <span class="token comment">// 是对象的话就要进行深拷贝</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>hash<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> hash<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> cloneObj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">obj<span class="token punctuation">.</span>constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 找到的是所属类原型上的constructor,而原型上的 constructor指向的是当前类本身</span>
  hash<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> cloneObj<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> key <span class="token keyword">in</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>obj<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 实现一个递归拷贝</span>
      cloneObj<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">deepClone</span><span class="token punctuation">(</span>obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">,</span> hash<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> cloneObj<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">address</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">x</span><span class="token operator">:</span> <span class="token number">100</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
obj<span class="token punctuation">.</span>o <span class="token operator">=</span> obj<span class="token punctuation">;</span> <span class="token comment">// 对象存在循环引用的情况</span>
<span class="token keyword">let</span> d <span class="token operator">=</span> <span class="token function">deepClone</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
obj<span class="token punctuation">.</span>address<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">200</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">in</span> 操作符
<span class="token comment">//判断一个属性名是否存在对象中</span>
<span class="token keyword">let</span> b <span class="token operator">=</span> <span class="token punctuation">{</span>
     a：<span class="token string">&quot;c&quot;</span> 
<span class="token punctuation">}</span>
 <span class="token string">'c'</span> <span class="token keyword">in</span> b  <span class="token comment">//false</span>


<span class="token comment">//ES6提供的判断一个属性名是否在对象中</span>
<span class="token keyword">let</span> b <span class="token operator">=</span> <span class="token punctuation">{</span>
     a：<span class="token string">&quot;c&quot;</span> 
<span class="token punctuation">}</span>
b<span class="token punctuation">.</span><span class="token function">hasOwnProtery</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span> <span class="token comment">//得到true</span>

</code></pre></div><h3 id="数组的扩展"><a href="#数组的扩展" class="header-anchor">#</a> 数组的扩展</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">every</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 此方法传入一个数组，当数组内元素都满足条件时返回true，否则返回false</span>
<span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//这个方法返回一个数组，并不会对原数组产生变化</span>
<span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//数组截取，传入三个参数，分别是原数组，截取开始位置，截取最终位置。此方法返回一个新的数组</span>
Array<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//删除数组的最后一位元素并返回此元素</span>
Array<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 删除数组第一位元素并返回此元素</span>
Array<span class="token punctuation">.</span><span class="token function">unshift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">//往数组开头添加元素 </span>
Array<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//改变数组本身，用于删除或者取代数组某一部分</span>
运算扩展符（<span class="token operator">...</span>）
本质是将数组内所有元素取出来
<span class="token function">作用：</span>
<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>合并数组
<span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span>
<span class="token keyword">let</span> b <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">]</span>
<span class="token keyword">let</span> c <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>a<span class="token punctuation">,</span><span class="token operator">...</span>b<span class="token punctuation">]</span> <span class="token comment">//[1,2,3,4,5,6]</span>
<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>与结构赋值组合
<span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span>
<span class="token keyword">let</span> <span class="token punctuation">[</span>b<span class="token punctuation">,</span><span class="token operator">...</span>c<span class="token punctuation">]</span> <span class="token operator">=</span> a
那么 b <span class="token operator">=</span> <span class="token number">1</span>  <span class="token operator">...</span>c <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span>
<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>替代部分apply的作用
运用max方法时
<span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">]</span>
Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token operator">...</span>a<span class="token punctuation">)</span> <span class="token comment">//得到5</span>
<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>将字符串转变为数组
<span class="token keyword">let</span> b <span class="token operator">=</span> <span class="token string">'123'</span>
<span class="token keyword">let</span> c <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>b<span class="token punctuation">]</span> 得到<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span>
<span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token function">将具有Iterator接口的对象转化为数组</span><span class="token punctuation">(</span>但一般不使用此运算符进行转换）
 <span class="token keyword">let</span> set  <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
 <span class="token keyword">let</span> b <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>set<span class="token punctuation">]</span> <span class="token comment">//[1,2,3] </span>
 
Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token function">将具有Iterator接口和类似数组的对象</span><span class="token punctuation">(</span>具有lenght元素的<span class="token punctuation">)</span>转化为数组<span class="token punctuation">)</span>
<span class="token keyword">let</span> b <span class="token operator">=</span> '<span class="token number">234</span>
<span class="token keyword">let</span> a <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token comment">// [2,3,4]</span>

Array<span class="token punctuation">.</span>of<span class="token operator">:</span>将一组数值转为数组

Array<span class="token punctuation">.</span><span class="token function">copyWithIn</span><span class="token punctuation">(</span>将数组内一部分进行复制，并覆盖到数组内的一部分<span class="token punctuation">,</span>对数组本身进行改变<span class="token punctuation">)</span>
<span class="token keyword">let</span> a  <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">]</span>
a<span class="token punctuation">.</span><span class="token function">copyWithIn</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token comment">//三个参数 第一个是从哪里开始覆盖 第二个和第三个分别是复制的起始，范围包括终止但是不包括起始</span>
                    <span class="token comment">//得到 [4,5,4,5]</span>

Array<span class="token punctuation">.</span>find <span class="token comment">//循环数组找到第一个符合条件的元素，并将这个元素返回</span>
Array<span class="token punctuation">.</span>findIndex <span class="token comment">//循环数组找到第一个符合条件的元素，并将此元素的下标返回</span>

Array<span class="token punctuation">.</span>keys <span class="token comment">//返回一个Iterator对象，对象内包含此数组所有下标</span>
Array<span class="token punctuation">.</span>values <span class="token comment">//返回一个Iterator对象，对象内包含此数组内所有元素</span>
Array<span class="token punctuation">.</span>entries <span class="token comment">//返回一个Iterator对线，对象内包含下标和元素的键值对</span>
<span class="token keyword">let</span>  b <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
b<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//得到[[0,4],[1,5],[2,6]]</span>

Array<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>判断一个数组内是否含有此对象）
<span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span>
a<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">//true</span>

Array<span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span>数组填充方法<span class="token punctuation">)</span>
<span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span>
a<span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">//得到[3,2,3] //第一个参数是要填充的数值</span>

数组空位：
<span class="token keyword">let</span> <span class="token constant">A</span>  <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token punctuation">,</span><span class="token punctuation">]</span>
不要出现上面的数组空位的现象，因为数组方法处理空位的流程不一样

</code></pre></div><h3 id="函数的扩展"><a href="#函数的扩展" class="header-anchor">#</a> 函数的扩展</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">a</span><span class="token punctuation">(</span><span class="token parameter">x <span class="token punctuation">,</span>a<span class="token operator">=</span><span class="token number">0</span></span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token comment">//允许函数参数带有默认值，但这种情况一般只适用尾参数而不是用于头参数</span>
    
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">b</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>a<span class="token punctuation">,</span>c<span class="token punctuation">}</span></span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token comment">//允许函数参数为解构赋值</span>
      a  <span class="token comment">//'c'</span>
      c <span class="token comment">// 'b'</span>
<span class="token punctuation">}</span>
<span class="token function">b</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">a</span><span class="token operator">:</span><span class="token string">'c'</span><span class="token punctuation">,</span>
  c：<span class="token string">&quot;b&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">//有一个特殊的操作</span>
<span class="token keyword">function</span> <span class="token function">f</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>a<span class="token punctuation">,</span><span class="token operator">...</span>b<span class="token punctuation">}</span></span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">//这里的b就为{c：&quot;d&quot;}</span>
<span class="token punctuation">}</span>
<span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">a</span><span class="token operator">:</span><span class="token string">'c'</span><span class="token punctuation">,</span><span class="token literal-property property">c</span><span class="token operator">:</span><span class="token string">'d'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">let</span> <span class="token punctuation">{</span>a<span class="token punctuation">,</span><span class="token operator">...</span>b<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token literal-property property">a</span><span class="token operator">:</span><span class="token string">&quot;c&quot;</span><span class="token punctuation">,</span><span class="token literal-property property">c</span><span class="token operator">:</span><span class="token string">'d'</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
 <span class="token comment">//这里 b为{c:'d'}</span>

函数的参数长度：
<span class="token comment">//function.length</span>
（<span class="token keyword">function</span> （a <span class="token punctuation">,</span>b）<span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token function">）</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>lenght <span class="token comment">//可获取函数参数的个数，但若参数为解构的或者带有默认值则不被计算</span>

rest参数
<span class="token keyword">function</span> <span class="token function">a</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>tes</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
     tes<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//tes为[1，2，3]的数组</span>
<span class="token punctuation">}</span>

<span class="token function">a</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span>
注意rest参数只能是尾参数
</code></pre></div><h3 id="字符串的扩展"><a href="#字符串的扩展" class="header-anchor">#</a> 字符串的扩展</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code> <span class="token comment">//模板字符串可以进行嵌套</span>
        <span class="token keyword">let</span> c <span class="token operator">=</span> <span class="token string">'22'</span><span class="token punctuation">;</span>
        <span class="token keyword">let</span> d <span class="token operator">=</span> <span class="token string">'33'</span><span class="token punctuation">;</span>
        <span class="token keyword">let</span> e <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">嵌套1</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>c<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">嵌套2</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>d<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//对模板字符串两端进行去除空格的操作</span>
        <span class="token keyword">let</span> h <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>c<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">空格操作 </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>h<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//标签模板，作用于限制用户的输入，转义用户的输入，例如&lt;转义为&amp;lt; 防止xss攻击</span>
        <span class="token keyword">let</span> g <span class="token operator">=</span> change<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">测试&lt;&gt;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>c<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">测试</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>d<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">测试</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span> <span class="token comment">//这一步相当于将模板字符串当做参数chage函数中</span>
        <span class="token keyword">function</span> <span class="token function">change</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>rest</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>rest<span class="token punctuation">)</span><span class="token punctuation">;</span>
           <span class="token comment">// rest返回一个数组，数组的第一位也是个数组，这个数组里面是模板字符串除开变量后的数据，例如上面就等于['测试&lt;&gt;','测试','测试']</span>
           <span class="token comment">//除开第一位，剩下的每一个元素就为模板字符串中的变量</span>
           <span class="token comment">//即rest返回[['测试&lt;&gt;','测试','测试'],'22','33']</span>
           console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>rest<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>raw<span class="token punctuation">)</span>
           <span class="token comment">//我们输入的字符串是会被js进行一层转义的例如\n，会被转义为\\n，要拿到转义前的数据，就需要通过第一个参数中的raw属性</span>
           <span class="token comment">//返回['测试&lt;&gt;','测试','测试']</span>
        <span class="token punctuation">}</span>
</code></pre></div><h3 id="字符串新增的方法"><a href="#字符串新增的方法" class="header-anchor">#</a> 字符串新增的方法</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code>
<span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token string">'asdcf'</span>
a<span class="token punctuation">.</span><span class="token function">At</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">//得到“a”,其作用和charAt一样用于获取字符串中指定位置的字符，但是相对于charAt来说，At能更精准的获取字符</span>

<span class="token comment">//判断一个字符是否存在于字符串中</span>
a<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token comment">//判断字符串中是否包含有传进的字符，可传第二个参数表示从第几位开始找</span>
a<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">//判断该字符串是否以传入的字符作为开始，也可传入第二个参数</span>
a<span class="token punctuation">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span><span class="token string">'f'</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token comment">//判断该字符串是否以传入的字符串作为结尾，也可传入第二个参数</span>

<span class="token comment">//使一个字符串重复</span>
a<span class="token punctuation">.</span><span class="token function">repeat</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token comment">//得到'asdcfasdcfasdcf',即将a字符串重复3次</span>

<span class="token comment">//截取字符串</span>
<span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token string">'123'</span><span class="token punctuation">;</span>
a<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment">//得到12 substr(从哪个位置开始，截取多少位);</span>
a<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment">//得到12 substring(开始位置，结束位置),截取的内容不包括结束位置的内容</span>

<span class="token comment">//填充字符串</span>
a<span class="token punctuation">.</span><span class="token function">padStart</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">&quot;0&quot;</span><span class="token punctuation">)</span><span class="token comment">//往字符串开头填充字符0，但是填充后的字符串数为2，但是a字符串本身的长度为5，大于填充后的长度，这次填充只会返回'asdcf'本身</span>
a<span class="token punctuation">.</span><span class="token function">padEnd</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">'0'</span><span class="token punctuation">)</span><span class="token comment">//效果同上，只是这个是从字符串尾部进行填充</span>
a<span class="token punctuation">.</span><span class="token function">padStart</span><span class="token punctuation">(</span><span class="token string">'7'</span><span class="token punctuation">,</span><span class="token string">'012345'</span><span class="token punctuation">)</span><span class="token comment">//填充后的长度为7，而a本身的长度为5，填充的字符串长度为6，加起来为11大于填充后的长度，所以会对填充字符串进行裁剪，最终得到的字符串为'01asdcf'</span>

<span class="token comment">//去掉字符串的空格，返回一个新的字符串</span>
a<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//去掉a字符的前后空格，包括换行符等</span>
a<span class="token punctuation">.</span><span class="token function">trimStart</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">//去掉a字符串的前空格</span>
a<span class="token punctuation">.</span><span class="token function">trimEnd</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//去掉a字符串的后空格</span>

<span class="token comment">//快速的全部替换</span>
<span class="token keyword">let</span> c <span class="token operator">=</span><span class="token string">'12131245'</span><span class="token punctuation">;</span>
a<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">'12'</span><span class="token punctuation">,</span><span class="token string">'00'</span><span class="token punctuation">)</span> <span class="token comment">//得到的字符串为00131245，只替换了一次</span>
a<span class="token punctuation">.</span><span class="token function">replaceAll</span><span class="token punctuation">(</span><span class="token string">'12'</span><span class="token punctuation">,</span><span class="token string">'00'</span><span class="token punctuation">)</span> <span class="token comment">//得到的字符串为00130045</span>
<span class="token comment">//如果替换的法则是正则，则必须加上g修饰符,不然会报错</span>
a<span class="token punctuation">.</span><span class="token function">replaceAll</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">12</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span><span class="token string">'00'</span><span class="token punctuation">)</span> <span class="token comment">//得到的字符串为00130045</span>

<span class="token comment">//替换的字符串也可以是个函数</span>
<span class="token keyword">function</span> <span class="token function">changeString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">'000'</span>
<span class="token punctuation">}</span>
a<span class="token punctuation">.</span><span class="token function">replaceAll</span><span class="token punctuation">(</span><span class="token string">'12'</span><span class="token punctuation">,</span>changeString<span class="token punctuation">)</span>

<span class="token comment">//获得模板字符串的结果</span>
<span class="token keyword">let</span> index <span class="token operator">=</span> <span class="token string">'22'</span><span class="token punctuation">;</span>
String<span class="token punctuation">.</span>raw<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>index<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">456</span><span class="token template-punctuation string">`</span></span> <span class="token comment">//得到22456</span>
</code></pre></div><h3 id="正则"><a href="#正则" class="header-anchor">#</a> 正则</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code>两种写法：
<span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">regExp</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\s</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">regExp</span><span class="token punctuation">(</span><span class="token string">'s'</span><span class="token punctuation">,</span><span class="token string">'g'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//还可以以变量的方式</span>
<span class="token keyword">let</span> stringList <span class="token operator">=</span> <span class="token string">&quot;asdsafwfefsjkjcj&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> test <span class="token operator">=</span> <span class="token string">'asds'</span>
<span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">^</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>test<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token keyword">let</span> regexp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//第二种写法</span>
<span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\s</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span>
<span class="token keyword">let</span> b <span class="token operator">=</span> <span class="token string">'asd vsfas'</span>
<span class="token comment">//test方法，判断一个字符串中是否包含正则对象中的内容，包含则返回true</span>
 a<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//true</span>

<span class="token comment">//exec方法，进行字符串截取方法，注意如果不加g修饰符，就算字符串中有多个符合的字符串，也只会返回第一个符合的字符串</span>
<span class="token keyword">let</span> d <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">a\w</span><span class="token regex-delimiter">/</span></span>
<span class="token keyword">let</span> c <span class="token operator">=</span> <span class="token string">'ssa_sag'</span>
d<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span> <span class="token comment">//得到[&quot;a_&quot;, index: 2, input: &quot;ssa_sag&quot;, groups: undefined]</span>
d<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span> <span class="token comment">//得到[&quot;a_&quot;, index: 2, input: &quot;ssa_sag&quot;, groups: undefined]</span>
<span class="token comment">//加上g修饰符</span>
<span class="token keyword">let</span> d <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">a\w</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span>
d<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span> <span class="token comment">//得到[&quot;a_&quot;, index: 2, input: &quot;ssa_sag&quot;, groups: undefined]</span>
d<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span> <span class="token comment">//得到[&quot;ag&quot;, index: 5, input: &quot;ssa_sag&quot;, groups: undefined]</span>

<span class="token comment">//lastIndex属性：</span>
<span class="token comment">//RegEXP对象都会有这个属性，这个表明匹配从字符串的第几位开始，可进行改变</span>
<span class="token keyword">let</span> d <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">a\w</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span>
<span class="token keyword">let</span> c <span class="token operator">=</span> <span class="token string">'ssa_sag'</span>
d<span class="token punctuation">.</span>lastIndex <span class="token operator">=</span> <span class="token number">5</span>
d<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span> <span class="token comment">//得到[&quot;ag&quot;, index: 5, input: &quot;ssa_sag&quot;, groups: undefined],不从0开始，直接从5开始搜索，前提是在g修饰符的情况下</span>


<span class="token comment">//字符串方法中有四种可使用正则：</span>
str<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\s</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span> <span class="token comment">//返回匹配到的字符串，如果不加g或者y修饰符，则只会拿到一个字符串中的符合条件的字符串，加上的话会以数组返回</span>
str<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\s</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span><span class="token string">''</span><span class="token punctuation">)</span> <span class="token comment">//取代，将匹配到的字符串用第二个参数值进行取代，不加g或者y修饰符只会替换字符串中一个符合条件的字符串</span>
str<span class="token punctuation">.</span><span class="token function">search</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\s</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span><span class="token comment">//返回符合条件的第一个字符串的下标，无法使用g修饰符，且每次匹配都会从字符串的开头进行匹配</span>
str<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\s</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span><span class="token comment">//按照条件进行拆分</span>

<span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">s</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span>
a<span class="token punctuation">.</span><span class="token function">flags</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//可获取到正则对象所用到的修饰符，得到g</span>
<span class="token comment">//修饰符</span>
<span class="token operator">/</span>\s<span class="token operator">/</span>i <span class="token comment">//表示匹配的内容不区分大小写</span>
<span class="token operator">/</span>\s<span class="token operator">/</span>g <span class="token comment">//表示全局搜索，可用 str.exec(/\s/g)来获取匹配到的字符串,使用这个修饰符则不可以使用^头修饰符和$尾修饰符</span>
<span class="token operator">/</span>\s<span class="token operator">/</span>m <span class="token comment">//表示多行匹配</span>

<span class="token operator">/</span>\s<span class="token operator">/</span>y <span class="token comment">//与全局搜索类似，但不同的是，y修饰符必须从上一个匹配到的字符串之后的第一个字符开始进行搜索，特别重点注意，Y修饰符其实集合了^头修饰符</span>
<span class="token comment">//例如</span>
<span class="token keyword">let</span> c <span class="token operator">=</span> <span class="token string">'asges'</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> d <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">s</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span>
<span class="token keyword">let</span> h <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">s</span><span class="token regex-delimiter">/</span><span class="token regex-flags">y</span></span>
d<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span> <span class="token comment">//得到s，不需要顾忌从字符串的第几位开始匹配，只要符合条件的就获取到</span>
h<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span> <span class="token comment">//得到null，每次都从上一次找到符合字符串的下一位开始</span>
d<span class="token punctuation">.</span>sticky <span class="token comment">//false, 判断这个正则对象是否带有y修饰符</span>
d<span class="token punctuation">.</span>sticky <span class="token comment">//true, 判断这个正则对象是否带有y修饰符</span>

<span class="token operator">/</span>\s<span class="token operator">/</span>u <span class="token comment">//u修饰符，使正则对象可以匹配utf-16的编码字符串</span>
<span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token string">'鷄'</span>
<span class="token keyword">let</span> c <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">鷄</span><span class="token regex-delimiter">/</span></span>
<span class="token keyword">let</span> d <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">鷄</span><span class="token regex-delimiter">/</span><span class="token regex-flags">u</span></span>

c<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token comment">//false</span>
d<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token comment">//true</span>
c<span class="token punctuation">.</span>unicode <span class="token comment">//false,判断一个正则是否带有u修饰符</span>
d<span class="token punctuation">.</span>unicode <span class="token comment">//true,判断一个正则是否带有u修饰符</span>

<span class="token operator">/</span>\s<span class="token operator">/</span>s <span class="token comment">//s修饰符，与.混合使正则对象能够匹配回车符\r、换行符\n等，做到真正的能匹配所有</span>

<span class="token keyword">let</span> s <span class="token operator">=</span> <span class="token string">'ervd\nde'</span>
<span class="token keyword">let</span> d <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">ervd.de</span><span class="token regex-delimiter">/</span></span>
<span class="token keyword">let</span> h <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">ervd.de</span><span class="token regex-delimiter">/</span><span class="token regex-flags">s</span></span>

d<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span> <span class="token comment">//false</span>
h<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span> <span class="token comment">//true</span>
d<span class="token punctuation">.</span>doAll <span class="token comment">//false，判断一个正则对象是否带有s修饰符</span>
h<span class="token punctuation">.</span>doAll <span class="token comment">//true，判断一个正则对象是否带有s修饰符</span>

<span class="token comment">//多数匹配</span>
<span class="token punctuation">{</span>n<span class="token punctuation">,</span>m<span class="token punctuation">}</span><span class="token comment">//表示匹配个数，最少n个，最多m个</span>
<span class="token operator">*</span> <span class="token comment">//表示匹配数至少为0</span>
<span class="token operator">+</span> <span class="token comment">//表示匹配数至少为1</span>
<span class="token operator">?</span> <span class="token comment">//表示匹配数为0或者1</span>
<span class="token constant">A</span><span class="token operator">|</span><span class="token constant">B</span> <span class="token comment">//表示和A或者B匹配</span>

<span class="token comment">//快捷符</span>
<span class="token operator">^</span>a <span class="token comment">//表示字符串的必须以a开头</span>
e$ <span class="token comment">//表示字符串必须以e结尾</span>
\s <span class="token comment">//表示匹配空格</span>
\<span class="token constant">S</span> <span class="token comment">//表示匹配非空格</span>
\w <span class="token comment">//表示匹配数字、字母、下划线</span>
\<span class="token constant">W</span> <span class="token comment">//表示匹配特殊字符串(例如&lt;)</span>
\d <span class="token comment">//表示匹配数字</span>
\<span class="token constant">D</span> <span class="token comment">//表示匹配一个非数字</span>
<span class="token punctuation">.</span>  <span class="token comment">//表示全部匹配</span>

<span class="token comment">//正则的否定</span>
<span class="token operator">/</span><span class="token punctuation">[</span><span class="token operator">^</span>\d\s<span class="token punctuation">]</span><span class="token operator">/</span> <span class="token comment">//表示匹配的应该非数字非空格的字符</span>


            <span class="token comment">//正则的一些匹配方法</span>
            <span class="token comment">//前置断言，匹配必须在某某之前的字符串，规则/x(?=y)/</span>
            <span class="token keyword">let</span> d <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\d+(?=%)</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span> <span class="token comment">//匹配必须在%号之前的数字</span>
            <span class="token keyword">let</span> e <span class="token operator">=</span> <span class="token string">'100%er'</span><span class="token punctuation">;</span>
            <span class="token keyword">let</span> c <span class="token operator">=</span> <span class="token string">'100'</span><span class="token punctuation">;</span>
            d<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//true</span>
            d<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//false</span>
            <span class="token comment">//前置断言，匹配必须不在某某之前的字符串，规则/x(?!y)/</span>
            <span class="token keyword">let</span> d <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\d+(?!%)</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span> <span class="token comment">//匹配必须不在%号之前的数字</span>
            <span class="token keyword">let</span> e <span class="token operator">=</span> <span class="token string">'100%er'</span><span class="token punctuation">;</span>
            <span class="token keyword">let</span> c <span class="token operator">=</span> <span class="token string">'100'</span><span class="token punctuation">;</span>
            d<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//false</span>
            d<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//true</span>
            <span class="token comment">//后置断言，匹配必须在某某之后的字符串，规则/(?&lt;=y)x/</span>
            <span class="token keyword">let</span> d <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(?&lt;=%)\d+</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span>
            <span class="token keyword">let</span> e <span class="token operator">=</span> <span class="token string">'%100er'</span><span class="token punctuation">;</span>
            <span class="token keyword">let</span> c <span class="token operator">=</span> <span class="token string">'100'</span><span class="token punctuation">;</span>
            d<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//true</span>
            d<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//false</span>
            <span class="token comment">//后置断言，匹配必须不在某某之后的字符串，规则/(?&lt;!y)x/</span>
            <span class="token keyword">let</span> d <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(?&lt;!%)\d+</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span>
            <span class="token keyword">let</span> e <span class="token operator">=</span> <span class="token string">'%100er'</span><span class="token punctuation">;</span>
            <span class="token keyword">let</span> c <span class="token operator">=</span> <span class="token string">'100'</span><span class="token punctuation">;</span>
            d<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//false</span>
            d<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//true</span>

            <span class="token comment">//unicode特殊的匹配方法，用于匹配一些特殊字符规则/\p{}/</span>
            <span class="token keyword">let</span> d <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\p{Number}</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span>
            <span class="token keyword">let</span> c <span class="token operator">=</span> <span class="token string">'①②'</span><span class="token punctuation">;</span>
            d<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//true</span>

            <span class="token comment">//具名组匹配,规则/(?&lt;组名&gt;d+)/</span>
            <span class="token comment">//一般组匹配，拿到截取的数据的方法</span>
            <span class="token keyword">let</span> f <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(\d+)-(\d+)</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span>
            <span class="token keyword">let</span> g <span class="token operator">=</span> <span class="token string">'2020-04'</span><span class="token punctuation">;</span>
            <span class="token keyword">let</span> h <span class="token operator">=</span> f<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>g<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//得到一个数组[2020-04,,2020,04]</span>
            <span class="token comment">//需要通过h[1],h[2]的方式拿到截取的字符串</span>

            <span class="token comment">//具名组方式</span>
            <span class="token keyword">let</span> f <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(?&lt;year&gt;\d+)-(?&lt;month&gt;\d+)</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span>
            <span class="token keyword">let</span> g <span class="token operator">=</span> <span class="token string">'2020-04'</span><span class="token punctuation">;</span>
            <span class="token keyword">let</span> h <span class="token operator">=</span> f<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>g<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//得到一个对象，对象内有一个groups对象,groups:{year:2020,month:04}</span>
            <span class="token keyword">let</span> year <span class="token operator">=</span> h<span class="token punctuation">.</span>groups<span class="token punctuation">.</span>year<span class="token punctuation">;</span>
            <span class="token keyword">let</span> month <span class="token operator">=</span> h<span class="token punctuation">.</span>groups<span class="token punctuation">.</span>month<span class="token punctuation">;</span>

            <span class="token comment">//可以结合解构的方式获取</span>
            <span class="token keyword">let</span> <span class="token punctuation">{</span>
                <span class="token literal-property property">groups</span><span class="token operator">:</span> <span class="token punctuation">{</span> year<span class="token punctuation">,</span> month <span class="token punctuation">}</span>
            <span class="token punctuation">}</span> <span class="token operator">=</span> h<span class="token punctuation">;</span>

            <span class="token comment">//配合replace方法进行替换,通过$&lt;组名&gt;来引用组</span>
            <span class="token keyword">let</span> f <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(?&lt;year&gt;\d+)-(?&lt;month&gt;\d+)</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span>
            <span class="token keyword">let</span> g <span class="token operator">=</span> <span class="token string">'2020-04'</span><span class="token punctuation">;</span>
            g<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>f<span class="token punctuation">,</span> <span class="token string">'$&lt;month&gt;-$&lt;year&gt;'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">//具名组的引用,通过\k&lt;组名&gt;</span>
            <span class="token keyword">let</span> f <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(?&lt;year&gt;\d+)-\k&lt;year&gt;</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span>
            <span class="token keyword">let</span> g <span class="token operator">=</span> <span class="token string">'2020-04'</span><span class="token punctuation">;</span>
            f<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>g<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//true</span>
            <span class="token comment">//也可以通过\1来引用组名</span>
            <span class="token keyword">let</span> f <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(?&lt;year&gt;\d+)-\1</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span> <span class="token comment">//效果与上面的相同</span>
            <span class="token keyword">let</span> g <span class="token operator">=</span> <span class="token string">'2020-04'</span><span class="token punctuation">;</span>
            f<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>g<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//true</span>

            <span class="token comment">//一种提案，为exec()添加一个indices属性，用于获取截取字符串的开始位置和结束位置(还未通过)</span>
            <span class="token keyword">let</span> d <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">ac</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span>
            <span class="token keyword">let</span> h <span class="token operator">=</span> d<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token string">'aseacfe'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            h<span class="token punctuation">.</span>indices<span class="token punctuation">;</span> <span class="token comment">//得到一个数组[[3,5]] //注意结束的位置是在截取的字符串的后一位</span>
            <span class="token comment">//如果是具名</span>
            <span class="token keyword">let</span> f <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(?&lt;year&gt;\d+)-(?&lt;month&gt;\d+)</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span>
            <span class="token keyword">let</span> h <span class="token operator">=</span> f<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token string">'2020-04'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">let</span> year <span class="token operator">=</span> h<span class="token punctuation">.</span>indices<span class="token punctuation">.</span>groups<span class="token punctuation">.</span>year<span class="token punctuation">;</span> <span class="token comment">//[0,5]</span>
            <span class="token keyword">let</span> month <span class="token operator">=</span> h<span class="token punctuation">.</span>indices<span class="token punctuation">.</span>groups<span class="token punctuation">.</span>month<span class="token punctuation">;</span> <span class="token comment">//[6,8]</span>

            <span class="token comment">//matchAll方法，可一次获得多个截取对象，注意使用时正则对象必须带有g修饰符,且返回一个遍历器对象</span>
            <span class="token comment">//可以通过[...iterator]或者Array.from(iterator)将遍历器对象转为数组</span>
            <span class="token keyword">const</span> string <span class="token operator">=</span> <span class="token string">'test1test2test3'</span><span class="token punctuation">;</span>
            <span class="token keyword">const</span> regex <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">t(e)(st(\d?))</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">;</span> <span class="token comment">//如果匹配的法则是正则，则需要带上g修饰符</span>
           
 
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> match <span class="token keyword">of</span> string<span class="token punctuation">.</span><span class="token function">matchAll</span><span class="token punctuation">(</span>regex<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>match<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token comment">// [&quot;test1&quot;, &quot;e&quot;, &quot;st1&quot;, &quot;1&quot;, index: 0, input: &quot;test1test2test3&quot;]</span>
            <span class="token comment">// [&quot;test2&quot;, &quot;e&quot;, &quot;st2&quot;, &quot;2&quot;, index: 5, input: &quot;test1test2test3&quot;]</span>
            <span class="token comment">// [&quot;test3&quot;, &quot;e&quot;, &quot;st3&quot;, &quot;3&quot;, index: 10, input: &quot;test1test2test3&quot;]</span>

            <span class="token comment">// 和match的不同之处在于，match不会返回截取的字符串</span>
            regex<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>string<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//得到[test1,test2,test3]</span>

<span class="token comment">//正则匹配的贪婪模式和懒惰模式</span>
<span class="token comment">//默认的正则匹配都是贪婪模式的</span>
<span class="token keyword">let</span> d <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\d*</span><span class="token regex-delimiter">/</span></span>
<span class="token keyword">let</span> c <span class="token operator">=</span> <span class="token number">123456</span>
d<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span> <span class="token comment">//得到123456，贪婪模式下，尽可能的获取满足正则的字符串</span>

<span class="token comment">//懒惰模式，在数字匹配修饰符的后面加上?</span>
<span class="token keyword">let</span> d <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\d*?</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span>
<span class="token keyword">let</span> c <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\d+?</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span>
<span class="token keyword">let</span> g <span class="token operator">=</span> <span class="token number">123456</span><span class="token punctuation">;</span>
d<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>g<span class="token punctuation">)</span> <span class="token comment">//得到&quot;&quot;，因为.数字修饰符满足的最低条件是0个</span>
c<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>g<span class="token punctuation">)</span> <span class="token comment">//得到1，因为+数字修饰符满足的最低条件是1个</span>
</code></pre></div><h3 id="解构赋值的原理"><a href="#解构赋值的原理" class="header-anchor">#</a> 解构赋值的原理</h3> <p>解构赋值的核心思想是利用iterator接口遍历对象或数组，再利用key值或者下标一一对应赋值</p> <h3 id="module的使用"><a href="#module的使用" class="header-anchor">#</a> module的使用</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code>     <span class="token comment">//es6的模块设定是编译时加载（静态加载），而不是运行时加载</span>
        <span class="token keyword">import</span> <span class="token punctuation">{</span>
            a<span class="token punctuation">,</span>
            b<span class="token punctuation">,</span>
            c
        <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'test.js'</span> <span class="token comment">//这个意思是从test.js文件中加载a,b,c三个方法，而不是执行test.js文件，在获取a，b，c三个方法</span>

        <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'test.js'</span><span class="token punctuation">)</span> <span class="token comment">//这种称为运行时加载，即是先执行test.js文件，再获取文件中的方法</span>

        <span class="token comment">//es6模块默认使用严格模式</span>
        <span class="token comment">// 变量必须声明后再使用</span>
        <span class="token comment">// 函数的参数不能有同名属性，否则报错</span>
        <span class="token comment">// 不能使用with语句</span>
        <span class="token comment">// 不能对只读属性赋值，否则报错</span>
        <span class="token comment">// 不能使用前缀 0 表示八进制数，否则报错</span>
        <span class="token comment">// 不能删除不可删除的属性，否则报错</span>
        <span class="token comment">// 不能删除变量delete prop，会报错，只能删除属性delete global[prop]</span>
        <span class="token comment">// eval不会在它的外层作用域引入变量</span>
        <span class="token comment">// eval和arguments不能被重新赋值</span>
        <span class="token comment">// arguments不会自动反映函数参数的变化</span>
        <span class="token comment">// 不能使用arguments.callee</span>
        <span class="token comment">// 不能使用arguments.caller</span>
        <span class="token comment">// 禁止this指向全局对象</span>
        <span class="token comment">// 不能使用fn.caller和fn.arguments获取函数调用的堆栈</span>
        <span class="token comment">// 增加了保留字（比如protected、static和interface）</span>

        <span class="token comment">//要注意this的指向，在模块中this并不指向window，而是undefined</span>


        <span class="token comment">//export关键词，用于导出模块模块，只能写在顶层代码块中，不能写在函数或者其他代码块中</span>
        <span class="token comment">//export导出的必须是有声明的有类型的</span>
        <span class="token keyword">let</span> c <span class="token operator">=</span> <span class="token string">'22'</span><span class="token punctuation">;</span>
        <span class="token keyword">export</span> c <span class="token comment">//这样会报错</span>
        <span class="token comment">//要写成以下方式</span>
        <span class="token keyword">export</span> <span class="token keyword">let</span> c <span class="token operator">=</span> <span class="token string">'22'</span><span class="token punctuation">;</span>
        <span class="token comment">//或者</span>
        <span class="token keyword">let</span> c <span class="token operator">=</span> <span class="token string">'22'</span><span class="token punctuation">;</span>
        <span class="token keyword">export</span> <span class="token punctuation">{</span>
            c
        <span class="token punctuation">}</span>

        <span class="token comment">//导出的数据发生了改变，被导出的数据也会实时改变</span>
        <span class="token keyword">let</span> c <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">export</span> <span class="token punctuation">{</span>
            c
        <span class="token punctuation">}</span>
        <span class="token keyword">import</span> <span class="token punctuation">{</span>
            c
        <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'test.js'</span>
        c<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'2'</span><span class="token punctuation">)</span> <span class="token comment">//这时引入的test文件的c数组内就会增加一个'2'元素</span>

        <span class="token comment">//导出的数据可以改变名字</span>
        <span class="token keyword">let</span> c <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">export</span> <span class="token punctuation">{</span>
            c <span class="token keyword">as</span> testName
        <span class="token punctuation">}</span>
        <span class="token comment">//引入的时候要用改变后的名字</span>
        <span class="token keyword">import</span> <span class="token punctuation">{</span>
            testName
        <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'test.js'</span>


        <span class="token comment">//import关键词，用于的导入模块，不管写在代码的前面还是后面，都会被第一个执行</span>
        <span class="token comment">//如果多次引入同一个模块的同一个数据，那么只会执行一次</span>
        <span class="token comment">//对引入的数据进行改名</span>
        <span class="token keyword">import</span> <span class="token punctuation">{</span>
            c <span class="token keyword">as</span> testName
        <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'test.js'</span>

        <span class="token comment">//import导入的模块数据是只读的，不可以进行修改，除非是修改导入数据对象内部的数据</span>
        <span class="token keyword">export</span> <span class="token keyword">let</span> c <span class="token operator">=</span> <span class="token string">'22'</span><span class="token punctuation">;</span>
        <span class="token keyword">import</span> <span class="token punctuation">{</span>c<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'test.js'</span>
        c <span class="token operator">=</span> <span class="token number">66</span><span class="token punctuation">;</span> <span class="token comment">//这样会报错</span>

        <span class="token keyword">export</span> <span class="token keyword">let</span> c <span class="token operator">=</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token string">'22'</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token keyword">import</span> <span class="token punctuation">{</span>c<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'test.js'</span>
        c<span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token number">66</span><span class="token punctuation">;</span> <span class="token comment">//这样不会错误</span>

        <span class="token comment">// import是静态导入，所以不能使用变量，函数，或者可执行的代码</span>
        <span class="token keyword">import</span> <span class="token punctuation">{</span>
            c <span class="token operator">+</span> a
        <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'module'</span><span class="token punctuation">;</span> <span class="token comment">//这样会报错</span>

<span class="token comment">//test.js文件</span>
<span class="token comment">//export let a ='22';</span>
<span class="token comment">//export function abc(){</span>
<span class="token comment">// }</span>

<span class="token comment">//模块的整体加载</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> test <span class="token keyword">from</span> <span class="token string">'test.js'</span><span class="token punctuation">;</span> <span class="token comment">//这表示获取test文件的输出内容，并重命名为test,即得到一个test:{a:'22',abc:function(){}}</span>

<span class="token comment">//模块的默认输出，即模块默认会输出这个内容</span>
<span class="token keyword">function</span> <span class="token function">abc</span><span class="token punctuation">(</span><span class="token parameter">param</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> abc
<span class="token comment">//等同于</span>
<span class="token keyword">export</span> <span class="token punctuation">{</span> abc <span class="token keyword">as</span> <span class="token keyword">default</span> <span class="token punctuation">}</span>

<span class="token keyword">import</span> test <span class="token keyword">from</span> <span class="token string">'test'</span> <span class="token comment">//这个test就是abc方法</span>
<span class="token comment">//等同于使用export导出的</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token keyword">default</span> <span class="token keyword">as</span> test <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'test'</span><span class="token punctuation">;</span>
<span class="token comment">//即引入export导出的也引入export default导出的</span>
<span class="token keyword">import</span> a<span class="token punctuation">,</span> <span class="token punctuation">{</span> b <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'test'</span><span class="token punctuation">;</span> <span class="token comment">//a代表以export default导出，b代表export导出</span>

<span class="token comment">//继承模块</span>
<span class="token comment">//test.js文件</span>
<span class="token keyword">export</span> <span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token string">'22'</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">abc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token string">'2'</span>
<span class="token punctuation">}</span>
<span class="token comment">//当前是a.js文件</span>
<span class="token keyword">export</span> <span class="token operator">*</span> <span class="token keyword">as</span> test <span class="token keyword">from</span> <span class="token string">'test'</span><span class="token punctuation">;</span> <span class="token comment">//这段的意思是在a文件引入test中的所有输出，并将这些引入输出，但是*会将忽略export default的输出内容，即拿不到{a:'2'}</span>
<span class="token keyword">export</span> b <span class="token keyword">from</span> <span class="token string">'test'</span><span class="token punctuation">;</span> <span class="token comment">//通过这样 修复上述问题</span>
<span class="token comment">//注意通过export...from...获取的内容在当前文件中无法使用，即在a文件中无法使用test文件的abc函数，除非是import引入</span>
<span class="token keyword">export</span> <span class="token keyword">let</span> c <span class="token operator">=</span> <span class="token string">'22'</span><span class="token punctuation">;</span>

<span class="token comment">//c.js文件</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> name <span class="token keyword">from</span> <span class="token string">'a'</span><span class="token punctuation">;</span> <span class="token comment">//得到a中所有导出</span>

<span class="token comment">//跨模块共享常量，就是在一个公共文件中定义好所有的常量，并导出，再在需要的模块中引入</span>

  <span class="token comment">//因为import无法动态加载（运行时加载）模块，且必须写在模块的顶层代码块中所以引入import()来进行改变</span>
  <span class="token comment">//import()可以动态的加载，是一种异步的操作，加载结果返回一个Promise对象，在then中可以拿到引入模块的对象</span>
        <span class="token comment">//test.js</span>
        <span class="token comment">// export default{</span>
        <span class="token comment">//     c:'33'</span>
        <span class="token comment">// }</span>
        <span class="token keyword">let</span> c <span class="token operator">=</span> <span class="token string">&quot;./test.js&quot;</span><span class="token punctuation">;</span>
        <span class="token keyword">import</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token comment">//这个res就是{c:'33'}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">//可以在条件语句中使用</span>
            <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&quot;./test.js&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token comment">//这个res就是{c:'33'}</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

<span class="token comment">//commonJs和ES6模块的区别</span>
    commonJs采用module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>导出，<span class="token constant">ES6</span>模块使用<span class="token keyword">export</span>和<span class="token keyword">export</span> <span class="token keyword">default</span><span class="token punctuation">{</span><span class="token punctuation">}</span>导出
    commonJs采用require导入，<span class="token constant">ES6</span>模块采用<span class="token keyword">import</span>导入

    <span class="token comment">//commnJs导入得到的是一个拷贝值,而ES6模块得到的是值的引用</span>
    <span class="token comment">//例如test.js文件</span>
    <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span><span class="token literal-property property">a</span><span class="token operator">:</span><span class="token string">'2'</span><span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token constant">ES6</span>模块导出
    module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token literal-property property">a</span><span class="token operator">:</span><span class="token string">'2'</span><span class="token punctuation">}</span><span class="token punctuation">;</span> commonJs模块导出
     
    <span class="token comment">//ES6模块</span>
    <span class="token keyword">import</span> test <span class="token keyword">from</span> <span class="token string">'test.js'</span><span class="token punctuation">;</span> test<span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token string">'33'</span><span class="token punctuation">;</span>
    <span class="token comment">//得到的是值的引用,在当前文件中改变这个值的内容,源头的值也会发生变化</span>
    <span class="token comment">//在当前文件中改变了a的值, 那么test.js文件中也会a变为'33',如果有其他文件也引用了test文件，那么此时在其他文件中a的值也为'33'</span>
    
    <span class="token comment">//commonJs模块</span>
    <span class="token keyword">const</span> test <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'test.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> test<span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token string">'44'</span><span class="token punctuation">;</span>
    <span class="token comment">//得到的是值的拷贝，在当前文件中改变了这个值的内容，源头的值不会发生变化</span>
    <span class="token comment">//当前文件改变了a的值，但是在test.js文件中a的值不会发生改变</span>

    <span class="token comment">//ES6模块是编译时加载的,commonJs模块是运行时加载的</span>
    <span class="token comment">//ES6模块是异步加载进来的,commonJs模块是同步加载的</span>

    <span class="token comment">//CommonJS模块加载ES6模块</span>
    <span class="token punctuation">(</span><span class="token keyword">async</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> res <span class="token operator">=</span>  <span class="token keyword">await</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'test.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//ES6模块加载CommonJS模块</span>
    <span class="token keyword">import</span><span class="token punctuation">{</span>createRequire<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'module'</span><span class="token punctuation">;</span>
    <span class="token keyword">import</span> <span class="token punctuation">{</span> createRequire <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'module'</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> require <span class="token operator">=</span> <span class="token function">createRequire</span><span class="token punctuation">(</span><span class="token keyword">import</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> cjs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./cjs.cjs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 

    <span class="token comment">//在node.js环境中</span>
    <span class="token comment">//node.js本身就支持CommonJS，所以默认每一个js文件都是CommonJS模块,如果要每一个js文件默认是ES6模块，需要在packge.json中写</span>
    <span class="token literal-property property">type</span><span class="token operator">:</span><span class="token string">'module'</span>  <span class="token comment">//这时候要使用CommonJS模块，需要将文件名改为.cjs</span>
    <span class="token comment">//如果不修改packge.json的话就需要将ES6模块的文件名改为.mjs</span>
    <span class="token comment">//在ES6模块中不能使用,arguments require module exports __filename  __dirname 这些变量</span>

    <span class="token comment">//循环加载,即在a文件中加载了b文件，在b文件中加载了a文件</span>
    <span class="token comment">//ES6模块中，要保证能正常的循环加载，就需要将两个文件互相引用的值转变为函数</span>
    <span class="token comment">//a.js中</span>
    <span class="token keyword">import</span> <span class="token punctuation">{</span>bar<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;b.js&quot;</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'这是a文件'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">//注意必须写成函数的形式，函数表达式都不行</span>
        <span class="token keyword">return</span> <span class="token string">'foo'</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">export</span> <span class="token punctuation">{</span>
        foo
    <span class="token punctuation">}</span>
    <span class="token comment">//b.js中</span>
    <span class="token keyword">import</span> <span class="token punctuation">{</span>foo<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;a.js&quot;</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'这是b文件'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">function</span> <span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">//注意必须写成函数的形式，函数表达式都不行</span>
        <span class="token keyword">return</span> <span class="token string">'bar'</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">export</span> <span class="token punctuation">{</span>
        bar
    <span class="token punctuation">}</span>

    <span class="token comment">//从a文件开始执行得到的输出是</span>
    <span class="token comment">//这是b文件</span>
    <span class="token comment">//foo</span>
    <span class="token comment">//这是a文件</span>
    <span class="token comment">//bar</span>
</code></pre></div><h3 id="module的加载实现"><a href="#module的加载实现" class="header-anchor">#</a> module的加载实现</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code> <span class="token comment">//加载js文件的方式,defer会使该js文件在当前Dom全部渲染完毕后一个一个加载js文件，即test1执行完毕后，test2文件再执行</span>
    <span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">'test1.js'</span> defer<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">'test2.js'</span> defer<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

    <span class="token comment">//async的方式不会在Dom完全渲染完毕后在执行，当某个文件下载完毕后，就会暂停dom的渲染，执行下载完毕的js文件 </span>
    <span class="token comment">//同时它是无序的，例如test1和test2都是async类型加载的，但是并不会等test1执行完后再执行test2，而是谁先下载完毕，就先执行谁，执行完后再执行下一个</span>
    <span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">'test1.js'</span> async<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">'test2.js'</span> async<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

    <span class="token comment">//加载ES6模块需要标明它的类型</span>
    <span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">'test1.js'</span> type<span class="token operator">=</span><span class="token string">&quot;module&quot;</span> async<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
    <span class="token comment">//注意在ES6模块中，顶层的this并不等于window，而是等于undefined，可以利用这点判断当前模块是不是ES6模块 </span>

</code></pre></div><h3 id="装饰器的使用-可能会有大变"><a href="#装饰器的使用-可能会有大变" class="header-anchor">#</a> 装饰器的使用（可能会有大变）</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code>      <span class="token comment">//装饰器的使用，可以更好帮助我们了解类型</span>
        <span class="token comment">//装饰器写在类的class前面 以@+函数名的形式构成</span>
        <span class="token keyword">function</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token parameter">age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">//这里传入进来的age 实际上就是装饰的类，即Age类</span>
            age<span class="token punctuation">.</span>number <span class="token operator">=</span> <span class="token number">12</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        @test
        <span class="token keyword">class</span> <span class="token class-name">Age</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token punctuation">}</span>
        <span class="token keyword">new</span> <span class="token class-name">Age<span class="token punctuation">.</span>number</span> <span class="token comment">//得到1</span>

        <span class="token comment">//装饰类的函数，如果希望能够传入参数，那么就需要在装饰函数中返回一个函数</span>
        <span class="token keyword">function</span> <span class="token function">testRest</span><span class="token punctuation">(</span><span class="token parameter">param</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token parameter">age</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token comment">//返回的这个函数才是真正的装饰函数，age代表的就是装饰的类</span>
                <span class="token comment">//这样定义的是静态成员</span>
                age<span class="token punctuation">.</span>number <span class="token operator">=</span> param<span class="token punctuation">;</span>

                <span class="token comment">//这样定义则定义在类的原型上</span>
                age<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>number <span class="token operator">=</span> param<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        @<span class="token function">testRest</span><span class="token punctuation">(</span><span class="token number">23</span><span class="token punctuation">)</span> <span class="token keyword">class</span> <span class="token class-name">Age</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token punctuation">}</span>
        <span class="token keyword">new</span> <span class="token class-name">Age<span class="token punctuation">.</span>number</span> <span class="token comment">//得到23</span>

        <span class="token comment">//装饰函数可以用于装饰类中的方法</span>
        <span class="token keyword">function</span> <span class="token function">testFun</span><span class="token punctuation">(</span><span class="token parameter">object<span class="token punctuation">,</span> name<span class="token punctuation">,</span> descriptor</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">//object代表方法的prototype</span>
            <span class="token comment">//name代表prototype上的一个属性,</span>
            <span class="token comment">//descriptor代表对这个属性的描述，例如是否可以写入、遍历等</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">class</span> <span class="token class-name">Age</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            @testFun <span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        <span class="token comment">//如果有多个装饰函数，那么会从外到内，再从内执行到外</span>
        <span class="token keyword">function</span> <span class="token function">dec</span><span class="token punctuation">(</span><span class="token parameter">id</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'evaluated'</span><span class="token punctuation">,</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token parameter">target<span class="token punctuation">,</span> property<span class="token punctuation">,</span> descriptor</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'executed'</span><span class="token punctuation">,</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">class</span> <span class="token class-name">Example</span> <span class="token punctuation">{</span>
            @<span class="token function">dec</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
            @<span class="token function">dec</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
            <span class="token function">method</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// evaluated 1</span>
        <span class="token comment">// evaluated 2</span>
        <span class="token comment">// executed 2</span>
        <span class="token comment">// executed 1</span>

        <span class="token comment">//装饰器不能使用在函数上</span>

        <span class="token comment">//mixin的写法</span>
        <span class="token comment">//在mixin.js文件中</span>
        <span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
        <span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">mixin</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>rest</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token parameter">target</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>target<span class="token punctuation">.</span>property<span class="token punctuation">,</span> <span class="token punctuation">{</span>
                    foo
                <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token comment">//在要用的文件中</span>
        <span class="token keyword">import</span> mixin <span class="token keyword">from</span> <span class="token string">&quot;mixin.js&quot;</span><span class="token punctuation">;</span>
        @<span class="token function">mixin</span><span class="token punctuation">(</span><span class="token number">22</span><span class="token punctuation">)</span> <span class="token keyword">class</span> <span class="token class-name">C</span> <span class="token punctuation">{</span>

            <span class="token punctuation">}</span>
            <span class="token comment">//这样在类C的prototype上就会有一个foo方法</span>
            <span class="token comment">//但是这样如果方法重名，那么就会覆盖类C的prototype上的方法</span>
</code></pre></div><h3 id="apply、call和bind的使用"><a href="#apply、call和bind的使用" class="header-anchor">#</a> apply、call和bind的使用</h3> <ul><li><p>三者都可以显式绑定函数的this指向</p></li> <li><p>三者第一个参数都是this要指向的对象，若该参数为undefined或null，this则默认指向全局window</p></li> <li><p>传参不同：apply是数组、call是参数列表，而bind可以分为多次传入，实现参数的合并</p></li> <li><p>call、apply是立即执行，bind是返回绑定this之后的函数，如果这个新的函数作为构造函数被调用，那么this不再指向传入给bind的第一个参数，而是指向新生成的对象</p></li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//传入参数的方式不同</span>
<span class="token function">object</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">object</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//bind返回的是一个函数，需要()来使这个函数立即运行</span>
<span class="token function">object</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span>

<span class="token comment">// 手写call</span>
<span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">Call</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">context<span class="token punctuation">,</span> <span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// context为undefined或null时，则this默认指向全局window</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>context <span class="token operator">||</span> context <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    context <span class="token operator">=</span> window<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 利用Symbol创建一个唯一的key值，防止新增加的属性与obj中的属性名重复</span>
  <span class="token keyword">let</span> fn <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// this指向调用call的函数</span>
  context<span class="token punctuation">[</span>fn<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span> 
  <span class="token comment">// 隐式绑定this，如执行obj.foo(), foo内的this指向obj</span>
  <span class="token keyword">let</span> res <span class="token operator">=</span> context<span class="token punctuation">[</span>fn<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 执行完以后，删除新增加的属性</span>
  <span class="token keyword">delete</span> context<span class="token punctuation">[</span>fn<span class="token punctuation">]</span><span class="token punctuation">;</span> 
  <span class="token keyword">return</span> res<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// apply与call相似，只有第二个参数是一个数组，</span>
<span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">Apply</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">context<span class="token punctuation">,</span> args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>context <span class="token operator">||</span> context <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    context <span class="token operator">=</span> window<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">let</span> fn <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  context<span class="token punctuation">[</span>fn<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> res <span class="token operator">=</span> context<span class="token punctuation">[</span>fn<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">delete</span> context<span class="token punctuation">[</span>fn<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> res<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// bind要考虑返回的函数，作为构造函数被调用的情况</span>
<span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">Bind</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">context<span class="token punctuation">,</span> <span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>context <span class="token operator">||</span> context <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    context <span class="token operator">=</span> window<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">let</span> fn <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> f <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token function-variable function">result</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token keyword">instanceof</span> <span class="token class-name">fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// result如果作为构造函数被调用，this指向的是new出来的对象</span>
      <span class="token comment">// this instanceof fn，判断new出来的对象是否为fn的实例</span>
      <span class="token keyword">this</span><span class="token punctuation">[</span>f<span class="token punctuation">]</span> <span class="token operator">=</span> fn<span class="token punctuation">;</span>
      <span class="token keyword">let</span> res <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">[</span>f<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token operator">...</span>args1<span class="token punctuation">,</span> <span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">delete</span> <span class="token keyword">this</span><span class="token punctuation">[</span>f<span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> res<span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token comment">// bind返回的函数作为普通函数被调用时</span>
      context<span class="token punctuation">[</span>f<span class="token punctuation">]</span> <span class="token operator">=</span> fn<span class="token punctuation">;</span>
      <span class="token keyword">let</span> res <span class="token operator">=</span> context<span class="token punctuation">[</span>f<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token operator">...</span>args1<span class="token punctuation">,</span> <span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">delete</span> context<span class="token punctuation">[</span>f<span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> res<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token comment">// 如果绑定的是构造函数 那么需要继承构造函数原型属性和方法</span>
  <span class="token comment">// 实现继承的方式: 使用Object.create</span>
  result<span class="token punctuation">.</span>prototype <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>fn<span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre></div><h3 id="this指针"><a href="#this指针" class="header-anchor">#</a> this指针</h3> <p><strong>this的5种绑定方式</strong></p> <ul><li><p>默认绑定(非严格模式下this指向全局对象，严格模式下函数内的this指向<code>undefined</code>)</p></li> <li><p>隐式绑定(当函数引用有上下文对象时, 如 <code>obj.foo()</code>的调用方式, foo内的this指向<code>ob</code>)</p></li> <li><p>显示绑定(通过call或者apply方法直接指定this的绑定对象, 如<code>foo.call(obj)</code>)</p></li> <li><p>new构造函数绑定，this指向新生成的对象</p></li> <li><p>箭头函数，this指向的是定义该函数时，外层环境中的this，<strong>箭头函数的this在定义时就决定了，不能改变</strong></p></li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token string">&quot;use strict&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span> <span class="token comment">// var定义的a变量挂载到window对象上</span>
<span class="token keyword">function</span> <span class="token function">foo</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'this1'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span>  <span class="token comment">// undefined</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>a<span class="token punctuation">)</span>  <span class="token comment">// 10</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>a<span class="token punctuation">)</span>  <span class="token comment">//  报错，Uncaught TypeError: Cannot read properties of undefined (reading 'a')</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'this2'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span>  <span class="token comment">// window</span>
<span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 注意：开启了严格模式，只是使得函数内的this指向undefined，它并不会改变全局中this的指向。因此this1中打印的是undefined，而this2还是window对象。</span>


<span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token number">10</span>
<span class="token keyword">const</span> b <span class="token operator">=</span> <span class="token number">20</span>
<span class="token keyword">function</span> <span class="token function">foo</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>a<span class="token punctuation">)</span>  <span class="token comment">// undefined</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>b<span class="token punctuation">)</span>  <span class="token comment">// undefined</span>
<span class="token punctuation">}</span>
<span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>a<span class="token punctuation">)</span> <span class="token comment">// undefined  </span>
<span class="token comment">// 如果把 var 改成了 let 或 const，变量是不会被绑定到window上的，所以此时会打印出三个undefined</span>


<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">1</span>
<span class="token keyword">function</span> <span class="token function">foo</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">2</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>  <span class="token comment">// window</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>a<span class="token punctuation">)</span> <span class="token comment">// 1</span>
<span class="token punctuation">}</span>
<span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// foo()函数内的this指向的是window，因为是window调用的foo，打印出的this.a是window下的a</span>



<span class="token keyword">var</span> obj2 <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
    <span class="token function-variable function">foo1</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>a<span class="token punctuation">)</span> <span class="token comment">// 2</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">foo2</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token comment">// window</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>a<span class="token punctuation">)</span> <span class="token comment">// 3</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">3</span>
 
  obj2<span class="token punctuation">.</span><span class="token function">foo1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  obj2<span class="token punctuation">.</span><span class="token function">foo2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
<span class="token comment">// 对于setTimeout中的函数，这里存在隐式绑定的this丢失，也就是当我们将函数作为参数传递时,会被隐式赋值，回调函数丢失this绑定，因此这时候setTimeout中函数内的this是指向window</span>

<span class="token keyword">let</span> c <span class="token operator">=</span><span class="token punctuation">{</span> <span class="token literal-property property">a</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token function-variable function">foo</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token keyword">undefined</span>
<span class="token keyword">let</span> d <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token literal-property property">a</span><span class="token operator">:</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token function-variable function">foo</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">fn</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">}</span>

<span class="token keyword">var</span> a<span class="token operator">=</span> <span class="token number">4</span>

d<span class="token punctuation">.</span><span class="token function">foo</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span>foo<span class="token punctuation">)</span> <span class="token comment">// window 4</span>

<span class="token comment">// 由此可以看出当把任意一个函数当作参数传递给一个函数时，那么这个函数内部的this就会丢失，从而指向全局的window对象（如果是严格模式下，则指向undefined）</span>


<span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
 <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'obj'</span><span class="token punctuation">,</span>
 <span class="token function-variable function">foo1</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token comment">// window</span>
 <span class="token punctuation">}</span><span class="token punctuation">,</span>
 <span class="token function-variable function">foo2</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token comment">// obj</span>
   <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
     console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token comment">// obj</span>
   <span class="token punctuation">}</span>
 <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token string">'window'</span>
obj<span class="token punctuation">.</span><span class="token function">foo1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
obj<span class="token punctuation">.</span><span class="token function">foo2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// 箭头函数内的this是由外层作用域决定的</span>
<span class="token comment">// 对于obj.foo1()函数的调用，它的外层作用域是window，对象obj当然不属于作用域了(作用域只有全局作用域、函数作用域、块级作用域)，所以会打印出window</span>
<span class="token comment">// obj.foo2()()，首先会执行obj.foo2()，这不是个箭头函数，所以它里面的this是调用它的obj对象，因此第二个打印为obj，而返回的匿名函数是一个箭头函数，它的      this由外层作用域决定，那也就是它的this会和foo2函数里的this一样，第三个打印也是obj</span>


</code></pre></div><h3 id="原生ajax写法"><a href="#原生ajax写法" class="header-anchor">#</a> 原生Ajax写法</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code> <span class="token keyword">const</span> xml <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        xml<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">'get'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span> <span class="token comment">//打开链接，第一个参数的请求的类型，第二个参数是请求的路径</span>
            <span class="token comment">//open之后才可以设置请求头的一些数据</span>
        xml<span class="token punctuation">.</span><span class="token function">setRequestHeader</span><span class="token punctuation">(</span><span class="token string">'Content-type'</span><span class="token punctuation">,</span> <span class="token string">'application/json'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//发送数据,如果是post请求的话</span>
        xml<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//监听请求的整个过程</span>
        xml<span class="token punctuation">.</span><span class="token function-variable function">onreadystatechange</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">switch</span> <span class="token punctuation">(</span>xml<span class="token punctuation">.</span>readyState<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">case</span> <span class="token number">0</span><span class="token operator">:</span> <span class="token comment">//表示成功创建xmlHttpRequest对象</span>
                <span class="token keyword">case</span> <span class="token number">1</span><span class="token operator">:</span> <span class="token comment">//表示已经与服务端建立连接</span>
                <span class="token keyword">case</span> <span class="token number">2</span><span class="token operator">:</span> <span class="token comment">//表示正在传输数据给服务端</span>
                <span class="token keyword">case</span> <span class="token number">3</span><span class="token operator">:</span> <span class="token comment">//表示服务端正在处理数据，这个时候也可以获取返回的数据，但是只能获取到一部分返回的数据</span>
                <span class="token keyword">case</span> <span class="token number">4</span><span class="token operator">:</span>
                    <span class="token comment">//可以接收到服务端返回的全部数据</span>
                    xml<span class="token punctuation">.</span>responseText <span class="token comment">//响应报文</span>
                    xml<span class="token punctuation">.</span>response <span class="token comment">//响应对象</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        <span class="token comment">//取消请求</span>
        xml<span class="token punctuation">.</span><span class="token function">abort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="promise异步函数"><a href="#promise异步函数" class="header-anchor">#</a> promise异步函数</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">promise使单线程的js多出了异步模式，即微任务</span><span class="token punctuation">(</span>其内部是同步代码，即js会先执行其内部的代码，而其成功回调是微任务<span class="token punctuation">)</span>

状态： 默认运行是为pending
      成功回调后为fulfilled
      失败回调后为rejected

<span class="token keyword">let</span> c <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHtttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
<span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span>reject</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
          <span class="token comment">//这里执行异步任务，并且设定好何时调用resolve，何时调用rejcet</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span>onreadystatechange <span class="token operator">===</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>readystate <span class="token operator">===</span> <span class="token string">'200'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token function">resolve</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span>responseText<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
            <span class="token function">reject</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    c<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>method<span class="token punctuation">,</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
    c<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
       <span class="token comment">//成功回调，执行resolve中函数</span>
<span class="token punctuation">}</span>，<span class="token keyword">function</span>（error）<span class="token punctuation">{</span>
        <span class="token comment">//then中可以传两个方法，一个是成功的，一个是失败的，但是一般不在then中处理失败</span>
        <span class="token punctuation">}</span>
       <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
           <span class="token comment">//处理reject中的函数，即失败的回调</span>
       <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">finally</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
           <span class="token comment">//不管成功或者失败都会执行这个函数</span>
       <span class="token punctuation">}</span><span class="token punctuation">)</span> 


<span class="token comment">//promise的一些方法</span>
Promise<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">[</span>promise1<span class="token punctuation">,</span>promise2<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">result</span><span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">//result为一个数组，包含了promise1和promise2中成功后返回的数据</span>
    <span class="token comment">//then方法的调用必须是在promise1和promise2全部执行完以后才会被调用</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
Promise<span class="token punctuation">.</span><span class="token function">race</span><span class="token punctuation">(</span><span class="token punctuation">[</span>promise1<span class="token punctuation">,</span>promise2<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
     <span class="token comment">//res为最先执行完的那个promise返回的数据    </span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">//构成promise对象</span>
Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span>会将传入的内容包装成promise对象<span class="token punctuation">,</span>然后返回这个promise对象
<span class="token comment">//如果resolve中传入的是一个promise对象,那么会将这个对象直接返回</span>
<span class="token comment">//如果传入resolve中的是带有then方法的对象，那么会执行这个对象的then方法,然后将结果包装为promise对象返回</span>
<span class="token keyword">let</span> thenObj <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span>reject</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'66'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>thenObj<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//输出'66'</span>
<span class="token comment">//如果传入的不是promise对象,也没有then方法</span>
<span class="token keyword">let</span> test <span class="token operator">=</span> <span class="token string">'44'</span><span class="token punctuation">;</span>
Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>test<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//输出'44'</span>
<span class="token comment">//实际的转化</span>
<span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token parameter">resolve</span> <span class="token operator">=&gt;</span> <span class="token function">resolve</span><span class="token punctuation">(</span>test<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">//不带任何参数的话,resolve会创造一个空的promise且将它的状态变为resolve</span>
Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//等同于</span>
<span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token parameter">resolve</span> <span class="token operator">=&gt;</span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment">//Promise.reject也会将传入内容包裹为promise对象,并将其状态变为reject,注意Promise.reject中传入内容，会原原本本的传入reject方法中，不管传入的是什么</span>
Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span><span class="token string">'22'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//等同于</span>
<span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span><span class="token parameter">reject</span> <span class="token operator">=&gt;</span> <span class="token function">reject</span><span class="token punctuation">(</span><span class="token string">'22'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> thenObj <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span>reject</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'66'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>thenObj<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">)</span> 
<span class="token comment">//输出</span>
<span class="token comment">//{</span>
<span class="token comment">//then(resolve,reject){</span>
  <span class="token comment">//    resolve('66')</span>
  <span class="token comment">//  }</span>
<span class="token comment">//}</span>

<span class="token comment">//promise允许两个then回调的使用</span>
<span class="token keyword">function</span> <span class="token function">callBack</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span>reject</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'执行1'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">callBack</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'执行2'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//当异步任务结束以后，会先输出执行1，再输出执行2</span>
</code></pre></div><h3 id="async-await语法糖"><a href="#async-await语法糖" class="header-anchor">#</a> async/await语法糖</h3> <ul><li><p><code>async</code>函数是<code>generator</code>（迭代函数）的语法糖</p></li> <li><p><code>async</code>函数返回的是一个Promise对象，有无值看有无return值</p></li> <li><p><code>await</code>关键字只能放在<code>async</code>函数内部，await关键字的作用 就是获取Promise中返回的resolve或者reject的值</p></li> <li><p><code>async、await</code>要结合<code>try/catch</code>使用，防止意外的错误</p></li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 这个方法的引入只是为了使异步的代码看起来像同步一样，且不再写then来回调</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">adc</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token comment">//async表明此方法为异步方法</span>
     <span class="token keyword">await</span> promise  <span class="token comment">//await后面必须是promise对象，await会暂停异步函数的执行，即只有promise对象执行完毕，且返回数据后， 函数才会继续执行</span>
    
    <span class="token comment">//这里面没有获取错误的方法，要通过try/cacth来捕获错误</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
         <span class="token keyword">await</span> promise
    <span class="token punctuation">}</span> <span class="token keyword">catch</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>
         
    <span class="token punctuation">}</span>
      
<span class="token punctuation">}</span>

<span class="token function">adc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//会返回一个promise对象，告诉底层此为一个异步执行的方法</span>
</code></pre></div><h3 id="generator函数"><a href="#generator函数" class="header-anchor">#</a> Generator函数</h3> <p>每次调用<code>Generator函数</code>就会返回一个<code>iterator</code>遍历器对象，不断的调用这个遍历器对象的<code>next</code>方法，可以拿到在Generator函数中使用<code>yield关键词</code>返回的内容</p> <ul><li><p><code>generator函数</code>跟普通函数在写法上的区别就是，多了一个星号<code>*</code></p></li> <li><p>只有在generator函数中才能使用<code>yield</code>，相当于generator函数执行的<code>中途暂停点</code></p></li> <li><p>generator函数是不会自动执行的，每一次调用它的<code>next</code>方法，会停留在下一个yield的位置</p></li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token operator">*</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
     <span class="token keyword">yield</span> <span class="token number">10</span><span class="token punctuation">;</span>
     <span class="token keyword">yield</span> <span class="token number">30</span><span class="token punctuation">;</span>
     <span class="token keyword">yield</span> <span class="token number">20</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> testIterator <span class="token operator">=</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
testIterator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//返回一个对象，{vlaue:10,done:false}</span>
testIterator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//返回一个对象，{vlaue:30,done:false}</span>
testIterator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//返回一个对象，{vlaue:20,done:false}</span>
testIterator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//返回一个对象，{vlaue:undefined,done:true}，当done为true时，表明已经执行完generator函数</span>
</code></pre></div><p><strong>generator函数</strong>转换为**<code>async、await</code>**</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">getData</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token parameter">resolve</span> <span class="token operator">=&gt;</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&quot;data&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;data: &quot;</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> data2 <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;data2: &quot;</span><span class="token punctuation">,</span> data2<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token string">&quot;success&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment">// 将上面示例转化为generator函数</span>
<span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">testG</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// await被编译成了yield</span>
  <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">yield</span> <span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;data: &quot;</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> data2 <span class="token operator">=</span> <span class="token keyword">yield</span> <span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;data2: &quot;</span><span class="token punctuation">,</span> data2<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token string">&quot;success&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 手动执行generator函数</span>

<span class="token comment">// 执行结果与`async、await`示例一致</span>
<span class="token keyword">const</span> <span class="token function-variable function">getData</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
  <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token parameter">resolve</span> <span class="token operator">=&gt;</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&quot;data&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">testG</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// await被编译成了yield</span>
  <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">yield</span> <span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;data: &quot;</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> data2 <span class="token operator">=</span> <span class="token keyword">yield</span> <span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;data2: &quot;</span><span class="token punctuation">,</span> data2<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token string">&quot;success&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> gen <span class="token operator">=</span> <span class="token function">testG</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> dataPromise <span class="token operator">=</span> gen<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
dataPromise<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">value1</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// data1的value被拿到了，继续调用next</span>
 
  <span class="token keyword">var</span> data2Promise <span class="token operator">=</span> gen<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span>value1<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 调用的generator的next方法时，传入一个值时，这个值就代表着上次yield返回的内容</span>
  <span class="token comment">// 上述的value1就代表着在 testG()方法中data的值等于value1</span>
    
  data2Promise<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">value2</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// data2的value拿到了 继续调用next并且传递value2</span>
    gen<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span>value2<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><h3 id="箭头函数"><a href="#箭头函数" class="header-anchor">#</a> 箭头函数</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code>特点：
<span class="token comment">//没有this指针，在它里面获取时，this指针为其上一层中的this，所以箭头函数中的this不由调用者决定，而由其定义时的上一层对象决定</span>
<span class="token comment">//即箭头函数在声明的时候就绑定自身的this指向(为其上一层对象),而不是像普通函数一样在调用的时候决定其内部this的指向</span>
<span class="token keyword">let</span> b <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">a</span><span class="token operator">:</span><span class="token string">'c'</span><span class="token punctuation">,</span>
    <span class="token function-variable function">d</span><span class="token operator">:</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
         <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
              console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>a<span class="token punctuation">)</span> 
         <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
b<span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//输出'c'</span>

<span class="token comment">//普通函数</span>
<span class="token keyword">let</span> common <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">a</span><span class="token operator">:</span><span class="token string">'d'</span><span class="token punctuation">,</span>
    <span class="token function-variable function">d</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
       <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
              console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>a<span class="token punctuation">)</span> 
         <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
common<span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//输出undefined</span>

<span class="token comment">//不能通过new创建</span>
<span class="token comment">// 不能使用argement参数</span>
<span class="token comment">//不能当做generator函数</span>
</code></pre></div><h3 id="symbol类型"><a href="#symbol类型" class="header-anchor">#</a> symbol类型</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code>用于保证对象的属性名是唯一的
<span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 不可用new来构造</span>

<span class="token keyword">let</span> s <span class="token operator">=</span> <span class="token punctuation">{</span>
     
<span class="token punctuation">}</span>
s<span class="token punctuation">[</span>a<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'s'</span> <span class="token comment">//通过[]来为对象添加属性，和获取Symbol类型的属性值</span>
<span class="token keyword">let</span> s <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token punctuation">[</span>a<span class="token punctuation">]</span><span class="token operator">:</span><span class="token string">'c'</span>  <span class="token comment">//在对象内也要通过[]来定义</span>
<span class="token punctuation">}</span>

s<span class="token punctuation">.</span>a <span class="token comment">// 不可以通过.运算符来添加和获取，因为.运算符后面的是字符串</span>

<span class="token keyword">let</span> b <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span> 
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span> <span class="token comment">//得到Symbol('a') //传入参数主要是为了区分Symbol</span>

<span class="token keyword">for</span><span class="token punctuation">.</span><span class="token punctuation">.</span>in 和 object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token punctuation">)</span>都不可以得到对象中的Symbol属性，只能通过Obejct<span class="token punctuation">.</span><span class="token function">getOwnPropertySymbols</span><span class="token punctuation">(</span><span class="token punctuation">)</span>来获取
</code></pre></div><p>属性：</p> <ul><li><p><code>Symbol.length</code>: 长度属性，值为<code>0</code>。</p></li> <li><p><code>Symbol.prototype</code>: <code>symbol</code>构造函数的原型。</p></li> <li><p><code>Symbol.iterator</code>: 返回一个对象默认迭代器的方法，被<code>for...of</code>使用。</p></li> <li><p><code>Symbol.match</code>: 用于对字符串进行匹配的方法，也用于确定一个对象是否可以作为正则表达式使用，被<code>String.prototype.match()</code>使用。</p></li> <li><p><code>Symbol.replace</code>: 替换匹配字符串的子串的方法，被<code>String.prototype.replace()</code>使用。</p></li> <li><p><code>Symbol.search</code>: 返回一个字符串中与正则表达式相匹配的索引的方法，被<code>String.prototype.search()</code>使用。</p></li> <li><p><code>Symbol.split</code>: 在匹配正则表达式的索引处拆分一个字符串的方法，被<code>String.prototype.split()</code>使用。</p></li> <li><p><code>Symbol.hasInstance</code>: 确定一个构造器对象识别的对象是否为它的实例的方法，被<code>instanceof</code>使用。</p></li> <li><p><code>Symbol.isConcatSpreadable</code>: 布尔值，表明一个对象是否应该<code>flattened</code>为它的数组元素，被<code>Array.prototype.concat()</code>使用。</p></li> <li><p><code>Symbol.unscopables</code>: 拥有和继承属性名的一个对象的值被排除在与环境绑定的相关对象外。</p></li> <li><p><code>Symbol.species</code>: 一个用于创建派生对象的构造器函数。</p></li> <li><p><code>Symbol.toPrimitive</code>: 一个将对象转化为基本数据类型的方法。</p></li> <li><p><code>Symbol.toStringTag</code>: 用于对象的默认描述的字符串值，被<code>Object.prototype.toString()</code>使用。</p></li></ul> <p>方法：</p> <p><code>Symbol.for(key)</code> <code>Symbol.for(key)</code>方法会根据给定的键<code>key</code>，来从运行时的<code>symbol</code>注册表中找到对应的<code>symbol</code>，如果找到了就返回它，否则就新建一个与该键关联的<code>symbol</code>，并放入全局<code>symbol</code>注册表中。和<code>Symbol()</code>不同的是，用<code>Symbol.for()</code>方法创建的的<code>symbol</code>会被放入一个全局<code>symbol</code>注册表中。当然<code>Symbol.for()</code>并不是每次都会创建一个新的<code>symbol</code>，它会首先检查给定的<code>key</code>是否已经在注册表中了。假如是则会直接返回上次存储的那个，否则它会再新建一个。</p> <ul><li><code>key</code>: 一个字符串，作为<code>symbol</code>注册表中与某<code>symbol</code>关联的键，同时也会作为该<code>symbol</code>的描述。</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> s1 <span class="token operator">=</span> Symbol<span class="token punctuation">.</span><span class="token function">for</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> s2 <span class="token operator">=</span> Symbol<span class="token punctuation">.</span><span class="token function">for</span><span class="token punctuation">(</span><span class="token string">&quot;s&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> s3 <span class="token operator">=</span> Symbol<span class="token punctuation">.</span><span class="token function">for</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> s4 <span class="token operator">=</span> Symbol<span class="token punctuation">.</span><span class="token function">for</span><span class="token punctuation">(</span><span class="token string">&quot;s&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s1 <span class="token operator">===</span> s3<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s2 <span class="token operator">===</span> s4<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// trueCopy to clipboardErrorCopied</span>
</code></pre></div><p><code>Symbol.keyFor(sym)</code> <code>Symbol.keyFor(sym)</code>方法用来获取全局<code>symbol</code>注册表中与某个<code>symbol</code>关联的键，如果全局注册表中查找到该<code>symbol</code>，则返回该<code>symbol</code>的<code>key</code>值，返回值为字符串类型，否则返回<code>undefined</code>。</p> <ul><li><code>sym</code>: 必选参数，需要查找键值的某个<code>Symbol</code>。</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> s1 <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> s2 <span class="token operator">=</span> Symbol<span class="token punctuation">.</span><span class="token function">for</span><span class="token punctuation">(</span><span class="token string">&quot;s&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> key1 <span class="token operator">=</span> Symbol<span class="token punctuation">.</span><span class="token function">keyFor</span><span class="token punctuation">(</span>s1<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> key2 <span class="token operator">=</span> Symbol<span class="token punctuation">.</span><span class="token function">keyFor</span><span class="token punctuation">(</span>s2<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>key1<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// undefined</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>key2<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// sCopy to clipboardErrorCopied</span>
</code></pre></div><p><code>symbol.toString()</code> <code>toString()</code>方法返回当前<code>symbol</code>对象的字符串表示，<code>Symbol</code>对象拥有自己的<code>toString</code>方法，因而遮蔽了原型链上的<code>Object.prototype.toString()</code>，<code>symbol</code>原始值不能转换为字符串，所以只能先转换成它的包装对象，再调用<code>toString()</code>方法。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> s <span class="token operator">=</span> Symbol<span class="token punctuation">.</span><span class="token function">for</span><span class="token punctuation">(</span><span class="token string">&quot;s&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Symbol(s)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">Object</span><span class="token punctuation">(</span><span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">&quot;s&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Symbol(s)Copy to clipboardErrorCopied</span>
</code></pre></div><p><code>symbol.valueOf()</code> <code>valueOf()</code>方法返回当前<code>symbol</code>对象所包含的<code>symbol</code>原始值。在<code>JavaScript</code>中，虽然大多数类型的对象在某些操作下都会自动的隐式调用自身的<code>valueOf()</code>方法或者<code>toString()</code>方法来将自己转换成一个原始值，但<code>symbol</code>对象不会这么干，<code>symbol</code>对象无法隐式转换成对应的原始值。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> s <span class="token operator">=</span> Symbol<span class="token punctuation">.</span><span class="token function">for</span><span class="token punctuation">(</span><span class="token string">&quot;s&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Symbol(s)</span>
</code></pre></div><h3 id="proxy代理对象"><a href="#proxy代理对象" class="header-anchor">#</a> proxy代理对象</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code>Proxy对象：用于对一个对象进行拦截操作，即获取或者修改对象都必须经过这层拦截操作

<span class="token keyword">let</span> proxy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span>handle<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//target:要代理的对象，可以是对象、数组和函数或者另外一个代理对象</span>
<span class="token comment">//handle:要进行拦截的操作</span>

<span class="token keyword">let</span> b <span class="token operator">=</span> <span class="token punctuation">{</span>
     <span class="token literal-property property">a</span><span class="token operator">:</span><span class="token string">'c'</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> proxy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span><span class="token punctuation">{</span>
    <span class="token comment">//new Proxy会返回一个对象，返回的这个对象才有拦截操作，而对目标对象b来说并没有，除非将b赋值为此返回的对象</span>
    <span class="token function-variable function">get</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">target<span class="token punctuation">,</span>key<span class="token punctuation">,</span>proxy</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
          <span class="token comment">//target 代表目标对象b</span>
          <span class="token comment">//key 代表要获取的属性名</span>
          <span class="token comment">//proxy 代表proxy构造函数，即new后面的这个Proxy对象</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span>key<span class="token punctuation">,</span>proxy<span class="token punctuation">)</span>
         <span class="token comment">//没有操作则返回原属性值</span>
         
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">set</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">target<span class="token punctuation">,</span>key<span class="token punctuation">,</span>newValue</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
         <span class="token comment">// target 代表目标对象b</span>
         <span class="token comment">// key 代表要修改的属性名</span>
         <span class="token comment">// newValue 代表修改后的属性值</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span>key<span class="token punctuation">,</span>newValue<span class="token punctuation">)</span>
        <span class="token comment">//没有操作则返回原属性值</span>
    
<span class="token punctuation">}</span>    
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">//只有拿proxy才会触发拦截操作，直接拿b对象，是不会触发拦截操作</span>
proxy<span class="token punctuation">.</span>a <span class="token comment">//得到“c”  同时输出 b{a:'c'}, a, Proxy{target:b{a:'c'},handle:{get,set}}</span>
proxy<span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token string">'b'</span> <span class="token comment">//输出 b{a:'c'} ， a , 'b'</span>

<span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span><span class="token punctuation">{</span>
 <span class="token function">apply</span><span class="token punctuation">(</span><span class="token parameter">taget<span class="token punctuation">,</span>contentThis<span class="token punctuation">,</span>args</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">//taget:要代理的方法</span>
    <span class="token comment">//contentThis:这个方法的上文的对象（即this）</span>
    <span class="token comment">//args：传入的参数数组</span>
    在调用代理的方法，和使用apply、call时触发
 <span class="token punctuation">}</span>
 <span class="token function">has</span><span class="token punctuation">(</span><span class="token parameter">target<span class="token punctuation">,</span>key</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
   <span class="token comment">//target:代理的对象</span>
   <span class="token comment">//key：调用的属性名</span>
   在判断一个属性名是否在一个对象时触发 （ test <span class="token keyword">in</span> obj 触发）
 <span class="token punctuation">}</span>
 constuctor（target，args）<span class="token punctuation">{</span>
    <span class="token comment">//taget:要代理的构造方法</span>
    <span class="token comment">//args：传入的参数数组</span>
    在<span class="token keyword">new</span>一个对象时触发
 <span class="token punctuation">}</span>
 deleteProperty（target<span class="token punctuation">,</span>key）<span class="token punctuation">{</span>
  <span class="token comment">//target:代理的对象</span>
   <span class="token comment">//key：调用的属性名</span>
   在删除一个属性名时触发，即 <span class="token keyword">delete</span> obj<span class="token punctuation">.</span>a
 <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">//proxy中的所有拦截方法都需要return</span>
<span class="token comment">//proxy中所用的this指向的是new Proxy返回的对象，而不是obj这个目标对象</span>

撤销代理
proxy<span class="token punctuation">.</span><span class="token function">revocable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//调用此方法会销毁产生的代理对象proxy，同时代理的源对象或者方法也可能被垃圾回收机制回收</span>
</code></pre></div><p>其中handle对象中有的方法：</p> <ul><li><code>handler.getPrototypeOf()</code>: <code>Object.getPrototypeOf</code>方法的捕捉器。</li> <li><code>handler.setPrototypeOf()</code>: <code>Object.setPrototypeOf</code>方法的捕捉器。</li> <li><code>handler.isExtensible()</code>: <code>Object.isExtensible</code>方法的捕捉器。</li> <li><code>handler.preventExtensions()</code>: <code>Object.preventExtensions</code>方法的捕捉器。</li> <li><code>handler.getOwnPropertyDescriptor()</code>: <code>Object.getOwnPropertyDescriptor</code>方法的捕捉器。</li> <li><code>handler.defineProperty()</code>: <code>Object.defineProperty</code>方法的捕捉器。</li> <li><code>handler.has()</code>: <code>in</code>操作符的捕捉器。</li> <li><code>handler.get()</code>: 属性读取操作的捕捉器。</li> <li><code>handler.set()</code>: 属性设置操作的捕捉器。</li> <li><code>handler.deleteProperty()</code>: <code>delete</code>操作符的捕捉器。</li> <li><code>handler.ownKeys()</code>: <code>Reflect.ownKeys</code>、<code>Object.getOwnPropertyNames</code>、<code>Object.keys</code>、<code>Object.getOwnPropertySymbols</code>方法的捕捉器。</li> <li><code>handler.apply()</code>: 函数调用操作的捕捉器。</li> <li><code>handler.construct()</code>: <code>new</code>操作符的捕捉器。</li></ul> <h3 id="reflect对象"><a href="#reflect对象" class="header-anchor">#</a> reflect对象</h3> <p><code>Reflect</code>是<code>ES6</code>起<code>JavaScript</code>内置的对象，提供拦截<code>JavaScript</code>操作的方法，这些方法与<code>Proxy</code>对象的<code>handlers</code>中的方法基本相同。</p> <p><code>Reflect</code>并非一个构造函数，所以不能通过<code>new</code>运算符对其进行调用，或者将<code>Reflect</code>对象作为一个函数来调用，就像<code>Math</code>对象一样，<code>Reflect</code>对象的所有属性和方法都是静态的。
实际上<code>Reflect</code>对象是<code>ES6</code>为操作对象而提供的新<code>API</code>，而这个<code>API</code>设计的目的主要有：</p> <ul><li>将<code>Object</code>对象的一些属于语言内部的方法放到<code>Reflect</code>对象上，从<code>Reflect</code>上能拿到语言内部的方法，例如<code>Object.defineProperty</code>方法。</li> <li>修改某些<code>Object</code>方法返回的结果，例如<code>Object.defineProperty(obj, name, desc)</code>方法在无法定义属性的时候会抛出异常，而<code>Reflect.defineProperty(obj, name, desc)</code>方法在操作失败时则会返回<code>false</code>。</li> <li>让<code>Object</code>的操作都变成函数行为，例如<code>Object</code>的命令式<code>name in obj</code>和<code>delete obj[name]</code>与<code>Reflect.has(obj, name)</code>、<code>Reflect.deleteProperty(obj, name)</code>相等。</li> <li>使<code>Reflect</code>对象的方法与<code>Proxy</code>对象的方法一一对应，只要<code>Proxy</code>对象上能够定义的<code>handlers</code>方法<code>Reflect</code>也能找到。</li></ul> <h3 id="set数据类型"><a href="#set数据类型" class="header-anchor">#</a> set数据类型</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//类似数组的新解构，有iterator属性，所以可以使用for...of进行循环，但注意不是of的set对象</span>
<span class="token comment">//set解构可以去重，且使用的是精确对等，即‘5’和5是不相同的</span>
<span class="token comment">//set解构传入一个数组，但不会改变数组内部任何一个对象的类型</span>

本身带有的方法：
<span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// a的结果为类似数组的[1,2,3],这表明其有去重的特性</span>
a<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">//往其中添加一个值</span>
a<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token comment">//删除其中2的值</span>
a<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment">//判断其中是否有2这个值</span>
a<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//清空a中的所有值</span>

可转化为数组，然后使用数组的方法：
<span class="token punctuation">[</span><span class="token operator">...</span>a<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token function">遍历的方法：</span>
<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> keys： a<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//返回一个a中所有元素值的iterator遍历器，需要通过[...a.keys()]或者Array.from(a.keys())转化为数组</span>
<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> values<span class="token operator">:</span> a<span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//结果同上</span>
<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span> entries<span class="token operator">:</span>a<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//返回一个类似[[1,1],[2,2]]的遍历器，也需要通过转化，才能使用数组方法</span>

去重：
<span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> c <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

求两数组并集、差集和交集：
<span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> b <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">]</span>
并集：
<span class="token keyword">let</span> c <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token operator">...</span><span class="token function">newSet</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
交集：
<span class="token keyword">let</span> d <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">)</span>
差集：
<span class="token keyword">let</span> g <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token operator">!</span><span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="weakset类型"><a href="#weakset类型" class="header-anchor">#</a> weakSet类型</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//只能由对象构成，不可以遍历，没有size属性，所以无法获取其内容长度</span>
<span class="token keyword">let</span> temp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">weakSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//构建</span>
temp<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">//添加元素</span>
temp<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//删除元素</span>
temp<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//清空整个对象</span>
<span class="token comment">//因为其不进入垃圾清理机制，或者说弱引用，所以一帮用来存储一组DOM节点，或者临时存放一组对象</span>
</code></pre></div><h3 id="map数据类型"><a href="#map数据类型" class="header-anchor">#</a> Map数据类型</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//ES6新增的一种数据结构，是真正的键-值对的结构</span>

<span class="token keyword">let</span> temp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
temp<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//添加成员</span>
temp<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//获取成员</span>
temp<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//删除成员</span>
temp<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//判断是否有该成员</span>
temp<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 清除对象内全部成员</span>

遍历的方法
<span class="token comment">//因为有itrator接口所以可以通过 for..of进行循环,但是循环的必须是以下值</span>
temp<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//返回只有键名的遍历器</span>
temp<span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//返回只有键值的遍历器</span>
temp<span class="token punctuation">.</span><span class="token function">entires</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//返回以键值对形式的遍历器</span>
</code></pre></div><h3 id="weakmap数据类型"><a href="#weakmap数据类型" class="header-anchor">#</a> weakMap数据类型</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//键名必须是对象的结构，同样是弱引用，主要用于以DOM节点作键名的时候，利用这个可以不用考虑使用这个DOM节点创建事件后需要取消事件。</span>
<span class="token comment">//不可遍历，所以没有size属性</span>
<span class="token keyword">let</span> temp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">weakMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
temp<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">//添加元素</span>
temp<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">//获取元素</span>
temp<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//删除元素</span>
temp<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//清空整个对象</span>
</code></pre></div><h3 id="闭包"><a href="#闭包" class="header-anchor">#</a> 闭包</h3> <p>概述：闭包指的是在一个函数中将返回或者在window对象上挂载一个函数，这个函数能使用包裹其函数的内部变量。</p> <p>作用：</p> <ul><li>防抖</li> <li>节流</li> <li>定义私有变量</li> <li>模拟块级作用域</li> <li>防止全局变量污染</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">constant</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">let</span> name <span class="token operator">=</span> <span class="token string">'asd'</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> <span class="token function-variable function">test</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>name<span class="token operator">+</span><span class="token string">'er'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> test
<span class="token punctuation">}</span>
<span class="token keyword">let</span> teOne <span class="token operator">=</span> <span class="token function">constant</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> teTwo <span class="token operator">=</span> <span class="token function">constant</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">teOne</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//‘asder'</span>
<span class="token function">teTwo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 'asderer'</span>
</code></pre></div><ul><li>对回调提供支持</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">constant</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">let</span> name <span class="token operator">=</span> <span class="token string">'asd'</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> <span class="token function-variable function">test</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>name<span class="token operator">+</span><span class="token string">'er'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
 <span class="token function">setTimeOut</span><span class="token punctuation">(</span>test<span class="token punctuation">,</span><span class="token number">1000</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">constant</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p>缺点：</p> <ul><li>造成内存泄漏，因为外层包裹函数中定义的变量，不会被垃圾回收机制回收，而存在于内存之中</li> <li>在处理速度和内存的消耗上对脚本的性能有负面影响</li></ul> <h3 id="节流与防抖"><a href="#节流与防抖" class="header-anchor">#</a> 节流与防抖</h3> <p><code>节流</code>与<code>防抖</code>实际上都是通过减少回调函数的执行数来达成降低浏览器性能损耗的。</p> <p>不同：</p> <ul><li>节流是在事件不断自动触发的一段时间内，保证回调函数只在一定时间后被触发一次，减少回调函数的执行数</li> <li>防抖是在事件被人为的不断触发的一段时间内，保证当停止事件触发的一定时间后执行回调函数，减少回调函数的执行数</li></ul> <p>防抖</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//延迟防抖，即事件最后被触发的一段时间后，才执行回调函数</span>
<span class="token comment">//核心：利用闭包，定义一个定时器，事件每次被触发后，就会把原先的定时器去除，产生新的定时器，只有等定时器被完整的执行完后，才执行回调函数</span>

<span class="token keyword">function</span> <span class="token function">debounce</span><span class="token punctuation">(</span><span class="token parameter">waitTime<span class="token punctuation">,</span>callBack</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">let</span> timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
        timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span>callBack<span class="token punctuation">,</span>waitTime<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
window<span class="token punctuation">.</span>onscroll <span class="token operator">=</span> <span class="token function">debounce</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'1'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//表明当事件被最后触发之后的1秒以后，执行回调函数</span>

<span class="token comment">//立即防抖，即事件触发后立即执行一次回调函数，但之后必须等到一定时间后才会执行回调函数，在此期间事件被触发多少次都不会执行回调函数</span>
<span class="token comment">//核心：利用闭包，设定一个时间对象，当这个时间对象为空时，执行回调函数，之后清除这个时间对象，在重新通过setTimeout设定时间对象，且新时间对象的回调函数是将这个对象设置为空。</span>
<span class="token keyword">function</span> <span class="token function">debounce</span><span class="token punctuation">(</span><span class="token parameter">waitTime<span class="token punctuation">,</span>callBack</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">let</span> timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
       <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>timer<span class="token punctuation">)</span><span class="token punctuation">{</span>
                 <span class="token function">callBack</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
           <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
           timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span>timer<span class="token operator">=</span><span class="token keyword">null</span><span class="token punctuation">,</span>waitTime<span class="token punctuation">)</span>
       <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
window<span class="token punctuation">.</span>oncsroll <span class="token operator">=</span> <span class="token function">debounce</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'1'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>节流</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//时间戳方式</span>
<span class="token comment">//核心：通过判断当前事件触发的时间戳和上一次事件触发的时间戳的差是否大于规定的时间，大于则执行回调函数，不大于则不执行回调函数。</span>

<span class="token keyword">function</span> <span class="token function">throttle</span><span class="token punctuation">(</span><span class="token parameter">waitTime<span class="token punctuation">,</span>callBack</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">let</span> lastTime <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token function">renturn</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> now <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>now<span class="token operator">-</span>lastTime <span class="token operator">&gt;=</span> waitTime<span class="token punctuation">)</span><span class="token punctuation">{</span>
             <span class="token function">callBack</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            lastTime <span class="token operator">=</span> now<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

window<span class="token punctuation">.</span>onscroll <span class="token operator">=</span> <span class="token function">throttle</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'1'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//定时器方式</span>
<span class="token comment">//核心：利用闭包，当一个时间对象为空时，执行回调函数，同时将时间对象重新通过setTimeout赋值，且其回调函数是将这个时间对象设置为空。</span>

<span class="token keyword">function</span> <span class="token function">throttle</span><span class="token punctuation">(</span><span class="token parameter">waitTime<span class="token punctuation">,</span>callBack</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
     <span class="token keyword">let</span> timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>timer<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token function">callBack</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span>timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">,</span>waitTime<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
window<span class="token punctuation">.</span>onscroll <span class="token operator">=</span> <span class="token function">throttle</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'1'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>修改成vue框架的写法，是不需要以闭包的方式来保留timer的状态</p> <h3 id="全局变量污染"><a href="#全局变量污染" class="header-anchor">#</a> 全局变量污染</h3> <p>指的是在代码的不同部分定义相同名字的全局变量且其用途不同时，命名发生冲突，就会发生全局变量污染（即在一个部分内改变这个全局变量则另外一部分也会发生改变）</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//将所有的全局变量放置在一个对象内，类似vue的data对象</span>
<span class="token comment">//namespace模式就是把变量装在对象里面，在全局定义一个对象，然后把所有的你想写的全局变量定义在对象内部。你可以随时打印对象查询你是否定义过某个变量</span>
<span class="token keyword">let</span> obj<span class="token operator">=</span><span class="token punctuation">{</span>
a：“<span class="token number">1</span>”，
b：“<span class="token number">2</span>”<span class="token punctuation">}</span>
<span class="token comment">//namespace模式的缺点：就是由于我们把变量装在了一个对象当中，对象内部的东西是可以通过操作对象的方式进行增删改查的，不安全</span>

<span class="token comment">//使用自执行匿名函数的方式</span>
 <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">window</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
     <span class="token keyword">let</span> msg<span class="token operator">=</span><span class="token string">&quot;module4&quot;</span><span class="token punctuation">;</span>
     <span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
         console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;foo()&quot;</span><span class="token punctuation">,</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
     window<span class="token punctuation">.</span>module4<span class="token operator">=</span>foo<span class="token punctuation">;</span> 
     <span class="token comment">// 我们在window对象上写入一个属性名为module4属性值为foo函数 </span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>



</code></pre></div><h3 id="匿名函数和自执行函数"><a href="#匿名函数和自执行函数" class="header-anchor">#</a> 匿名函数和自执行函数</h3> <p>匿名函数即不需要函数名的函数，但必须将其赋值给一个变量，或者令其自执行，不然这个匿名函数毫无意义。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> test <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
     console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

</code></pre></div><p>自执行函数即不需要调用的函数，在定义的时候就会执行。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">//传入参数</span>
<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span>
 <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">22</span><span class="token punctuation">)</span>   <span class="token comment">//按照item的值，立刻执行一遍，常用于循环中</span>

</code></pre></div><p>简写方法(可去掉包裹函数的括号，但必须是在函数的表达式的时候)：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> <span class="token function-variable function">i</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span>
</code></pre></div><h3 id="eventloop-事件循环"><a href="#eventloop-事件循环" class="header-anchor">#</a> <code>EventLoop</code>（事件循环）</h3> <p>js是一门单线程的语言，这意味着js中的任务必须一件一件的执行，哪怕前面的任务需要话很长的时间，排在后面的任务也必须等前面的任务执行完后再执行</p> <p>广义上将任务定义为以下两种类型：</p> <ul><li><strong>同步任务</strong>，不需要花费时间去等待执行的任务</li> <li><strong>异步任务</strong>，需要花费时间去等待执行的任务</li></ul> <p>js执行时：</p> <ul><li><p>同步和异步任务分别进入不同的执行&quot;场所&quot;，同步的进入主线程，异步的进入Event Table并注册函数</p></li> <li><p>当指定的事情完成时，Event Table会将这个函数移入Event Queue</p></li> <li><p>主线程内的任务执行完毕为空，会去Event Queue读取对应的函数，进入主线程执行</p></li> <li><p>上述过程会不断重复，也就是常说的Event Loop(事件循环)</p></li></ul> <p><img src="image-20221129000816957.png" alt="image-20221129000816957"></p> <p>代码层面的解析：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> data <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
$<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">url</span><span class="token operator">:</span>www<span class="token punctuation">.</span>javascript<span class="token punctuation">.</span>com<span class="token punctuation">,</span>
    <span class="token literal-property property">data</span><span class="token operator">:</span>data<span class="token punctuation">,</span>
    <span class="token function-variable function">success</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'发送成功!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'代码执行结束'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><ul><li>ajax进入Event Table，注册回调函数success</li> <li>执行console.log('代码执行结束')</li> <li>ajax事件完成，回调函数success进入Event Queue（任务队列）</li> <li>主线程从Event Queue读取回调函数success并执行</li></ul> <p>从上面可以知道 <strong>异步任务花费的时间决定着其回调函数进入Event Queue中的时候</strong></p> <p>js将任务更将精细的定义为以下两种：</p> <ul><li><strong>macro-task(宏任务)</strong>：script全部代码（注意同步代码也属于宏任务）、setTimeout、setInterval、setImmediate（node.js环境）、I/O - UI交互事件、postMessage、MessageChannel</li> <li><strong>micro-task(微任务)</strong>：Promise，MutationObserver</li></ul> <p><strong>以上两种任务会分别进入到不同的Event Queue中，不同的是在于两个任务队列的执行时机</strong></p> <p><img src="image-20221129004750481.png" alt="image-20221129004750481"></p> <p>setTimeout和setInterval的解释：</p> <p>setTimeout和setInterval中传入的时间决定着其回调函数什么时候被压入进宏队列中</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">task</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">3000</span><span class="token punctuation">)</span>

<span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">10000000</span><span class="token punctuation">)</span>
</code></pre></div><p>上述代码的执行过程：</p> <ul><li><code>task()</code>进入Event Table并注册,计时开始</li> <li>执行<code>sleep</code>函数，很慢，非常慢，计时仍在继续</li> <li>3秒到了，计时事件<code>timeout</code>完成，<code>task()</code>进入Event Queue，但是<code>sleep</code>也太慢了吧，还没执行完，只好等着</li> <li><code>sleep</code>终于执行完了，<code>task()</code>终于从Event Queue进入了主线程执行</li></ul> <p>上述的流程走完，我们知道<code>setTimeout</code>这个函数，是经过指定时间后，把要执行的任务(本例中为<code>task()</code>)加入到Event Queue中，又因为是单线程任务要一个一个执行，如果前面的任务需要的时间太久，那么只能等着，导致真正的延迟时间远远大于3秒</p> <p>我们还经常遇到<code>setTimeout(fn,0)</code>这样的代码，0秒后执行又是什么意思呢？是不是可以立即执行呢？</p> <p>答案是不会的，<code>setTimeout(fn,0)</code>的含义是，指定某个任务在主线程最早可得的空闲时间执行，意思就是不用再等多少秒了，只要主线程执行栈内的同步任务全部执行完成，栈为空就马上执行。举例说明：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//代码1</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'先执行这里'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'执行啦'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
复制代码
<span class="token comment">//代码2</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'先执行这里'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'执行啦'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  

</code></pre></div><p>代码1的输出结果是：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//先执行这里</span>
<span class="token comment">//执行啦</span>
</code></pre></div><p>代码2的输出结果是：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//先执行这里</span>
<span class="token comment">// ... 3s later</span>
<span class="token comment">// 执行啦</span>
</code></pre></div><p>关于<code>setTimeout</code>要补充的是，即便主线程为空，0毫秒实际上也是达不到的。根据HTML的标准，最低是4毫秒</p> <p><code>setInterval</code>是循环的执行。对于执行顺序来说，<code>setInterval</code>会每隔指定的时间将注册的函数置入Event Queue，如果前面的任务耗时太久，那么同样需要等待。</p> <p>需要注意的一点是，对于<code>setInterval(fn,ms)</code>来说，我们已经知道不是每过<code>ms</code>秒会执行一次<code>fn</code>，而是每过<code>ms</code>秒，会有<code>fn</code>进入Event Queue。一旦**<code>setInterval</code>的回调函数<code>fn</code>执行时间超过了延迟时间<code>ms</code>，那么就完全看不出来有时间间隔了**</p> <p><strong>代码解释事件循环：</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 在此暂时将process.nextTick当作微任务的一种，实际上process.nextTick比微任务更早执行</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'2'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    process<span class="token punctuation">.</span><span class="token function">nextTick</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'3'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'4'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'5'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
process<span class="token punctuation">.</span><span class="token function">nextTick</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'6'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'7'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'8'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'9'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    process<span class="token punctuation">.</span><span class="token function">nextTick</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'10'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'11'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'12'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre></div><p>第一轮事件循环流程分析如下：</p> <ul><li>整体script作为第一个宏任务进入主线程，遇到<code>console.log</code>，输出1</li> <li>遇到<code>setTimeout</code>，将其记录在Event Table中，当其花费的时间结束后，将其回调函数被分发到宏任务Event Queue中。我们暂且记为<code>setTimeout1</code>。</li> <li>遇到<code>process.nextTick()</code>，将其记录在Event Table中，当其花费的时间结束后，将其回调函数被分发到微任务Event Queue中。我们记为<code>process1</code>。</li> <li>遇到<code>Promise</code>，<code>new Promise</code>直接执行，输出7。将其记录在Event Table中，当其花费的时间结束后，将<code>then</code>分发到微任务Event Queue中。我们记为<code>then1</code>。</li> <li>又遇到了<code>setTimeout</code>，将其记录在Event Table中，当其花费的时间结束后，将其回调函数被分发到宏任务Event Queue中，我们记为<code>setTimeout2</code>。</li></ul> <table><thead><tr><th>宏任务Event Queue</th> <th>微任务Event Queue</th></tr></thead> <tbody><tr><td>setTimeout1</td> <td>process1</td></tr> <tr><td>setTimeout2</td> <td>then1</td></tr></tbody></table> <ul><li>上表是第一轮事件循环宏任务结束时各Event Queue的情况，此时已经输出了1和7。</li> <li>我们发现了<code>process1</code>和<code>then1</code>两个微任务。</li> <li>执行<code>process1</code>,输出6。</li> <li>执行<code>then1</code>，输出8。</li></ul> <p>好了，第一轮事件循环正式结束，这一轮的结果是输出1，7，6，8。那么第二轮时间循环从<code>setTimeout1</code>宏任务开始：</p> <ul><li>首先输出2。接下来遇到了<code>process.nextTick()</code>，同样将其分发到微任务Event Queue中，记为<code>process2</code>。<code>new Promise</code>立即执行输出4，<code>then</code>也分发到微任务Event Queue中，记为<code>then2</code>。</li></ul> <table><thead><tr><th>宏任务Event Queue</th> <th>微任务Event Queue</th></tr></thead> <tbody><tr><td>setTimeout2</td> <td>process2</td></tr> <tr><td></td> <td>then2</td></tr></tbody></table> <ul><li>第二轮事件循环宏任务结束，我们发现有<code>process2</code>和<code>then2</code>两个微任务可以执行。</li> <li>输出3。</li> <li>输出5。</li> <li>第二轮事件循环结束，第二轮输出2，4，3，5。</li> <li>第三轮事件循环开始，此时只剩setTimeout2了，执行。</li> <li>直接输出9。</li> <li>将<code>process.nextTick()</code>分发到微任务Event Queue中。记为<code>process3</code>。</li> <li>直接执行<code>new Promise</code>，输出11。</li> <li>将<code>then</code>分发到微任务Event Queue中，记为<code>then3</code>。</li></ul> <table><thead><tr><th>宏任务Event Queue</th> <th>微任务Event Queue</th></tr></thead> <tbody><tr><td></td> <td>process3</td></tr> <tr><td></td> <td>then3</td></tr></tbody></table> <ul><li>第三轮事件循环宏任务执行结束，执行两个微任务<code>process3</code>和<code>then3</code>。</li> <li>输出10。</li> <li>输出12。</li> <li>第三轮事件循环结束，第三轮输出9，11，10，12。</li></ul> <p>整段代码，共进行了三次事件循环，完整的输出为1，7，6，8，2，4，3，5，9，11，10，12。 (请注意，node环境下的事件监听依赖libuv与前端环境不完全相同，输出顺序可能会有误差)</p> <p><strong>事件循环，宏任务，微任务的关系图</strong>：</p> <p><img src="image-20221129005549392.png" alt="image-20221129005549392"></p> <ul><li><p>代码执行过程中，宏任务和微任务放在不同的任务队列中</p></li> <li><p>当某个宏任务执行完后,会查看微任务队列是否有任务。如果有，执行微任务队列中的所有微任务(注意这里是执行所有的微任务)</p></li> <li><p>微任务执行完成后，会读取宏任务队列中排在最前的第一个宏任务（注意宏任务是一个个取），执行该宏任务，如果执行过程中，遇到微任务，依次加入微任务队列</p></li> <li><p>宏任务执行完成后，再次读取微任务队列里的任务，依次类推</p></li></ul> <p><strong>async、await事件轮询执行时机</strong></p> <ul><li>async隐式返回Promise，会产生一个微任务</li> <li>await后面的代码是在微任务时执行</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;script start&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">async1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> <span class="token function">async2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// await 隐式返回promise</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;async1 end&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 这里的执行时机：在执行微任务时执行</span>
<span class="token punctuation">}</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">async2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;async2 end&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 这里是同步代码</span>
<span class="token punctuation">}</span>
<span class="token function">async1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;setTimeout&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token parameter">resolve</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Promise&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 这里是同步代码</span>
  <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;promise1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;promise2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;script end&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 打印结果:  script start =&gt; async2 end =&gt; Promise =&gt; script end =&gt; async1 end =&gt; promise1 =&gt; promise2 =&gt; setTimeout</span>

</code></pre></div><p><strong>event loop 与 浏览器更新渲染时机</strong></p> <ul><li><p>浏览器更新渲染会在event loop中的 宏任务 和 微任务 完成后进行，即<code>宏任务 → 微任务 → 渲染更新</code>（先宏任务 再微任务，然后再渲染更新）</p></li> <li><p>宏任务队列中，如果有大量任务等待执行时，将<code>dom的变动作为微任务，能更快的将变化呈现给用户</code>，这样就可以在这一次的事件轮询中更新dom</p></li></ul> <p><strong>event loop与 vue nextTick</strong></p> <p><strong>vue nextTick为什么要优先使用微任务实现？</strong></p> <ul><li><p>vue nextTick的源码实现，优先级判断，总结就是<code>Promise &gt; MutationObserver &gt; setImmediate &gt; setTimeout</code></p></li> <li><p>这里优先使用Promise，因为根据event loop与浏览器更新渲染时机，使用微任务，本次event loop轮询就可以获取到更新的dom</p></li> <li><p>如果使用宏任务，要到下一次event loop中，才能获取到更新的dom</p></li></ul> <p><strong>Node中的process.nextTick</strong></p> <p>有很多文章把Node的process.nextTick和微任务混为一谈，但其实并不是同一个东西</p> <p>process.nextTick 是 Node.js 自身定义实现的一种机制，有自己的 <code>nextTickQueue</code></p> <p><strong>process.nextTick执行顺序早于微任务</strong></p> <p><strong>示例</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;start&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;timeout&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;promise&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
process<span class="token punctuation">.</span><span class="token function">nextTick</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;nextTick&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;promise1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;end&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 执行结果 start end nextTick  promise promise1 timeout </span>
</code></pre></div><h3 id="js的事件流"><a href="#js的事件流" class="header-anchor">#</a> JS的事件流</h3> <ul><li>事件捕获，层层寻找事件的目标节点</li> <li>目标阶段，触发目标对象上的方法</li> <li>事件冒泡，向上层层的触发事件</li></ul> <h3 id="js的事件委托"><a href="#js的事件委托" class="header-anchor">#</a> JS的事件委托</h3> <p>将原本挂载在子节点上的事件进行改变，将其挂载在父节点上，主要是利用事件冒泡的原理</p> <p>作用：</p> <ul><li>减少性能的损耗和内存的占用，因为降低DOM的操作，同时每注册一个事件，就会占用内存中的位置，减少事件的注册，则减少了内存的占用</li> <li>动态绑定事件，当新增一个子节点，这个新增的子节点同样能触发父节点身上的方法</li></ul> <h3 id="settimeout和setinterval的特点"><a href="#settimeout和setinterval的特点" class="header-anchor">#</a> <code>setTimeout</code>和<code>setInterval</code>的特点</h3> <p>这两个函数的第一个参数必须是一个函数，或者还未编译的代码</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>  <span class="token keyword">function</span> <span class="token function">a</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">231</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        <span class="token comment">//会立马执行，并不会延迟6秒执行</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token function">a</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">6000</span><span class="token punctuation">)</span>
         <span class="token comment">//修改后的形式，即使被传入的函数执行，则需要用匿名函数包裹起来</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token function">a</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">6000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//或者</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span><span class="token number">6000</span><span class="token punctuation">)</span>
</code></pre></div><p>对于vue框架来说，同样具有这个特点</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//对于setTimeout和setinterval这种宏任务来说,他们的执行顺序，评判的标准是他们的传入时间</span>

<span class="token comment">//代码中3000延迟的setInterval比1000延迟的setInterval先进入宏任务队列中，但是会先挑选延迟时间短的回调来执行</span>
<span class="token comment">//其实A和B是同时执行的，当执行栈内任务执行完毕了，就把这A和B同时开起来，开始计时，当时间到达了第1秒，就执行B的回调函数,当B的回调函数执行完后，时间还没有达到第3秒，那么就等待时间到达第3秒，再执行A的回调函数</span>
<span class="token constant">A</span><span class="token function">：setInterval</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
            
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token constant">B</span><span class="token function">：setInterval</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
             console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>       
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//输出 2 1</span>

<span class="token comment">//特殊点一</span>
<span class="token comment">//A和B同时开始，6秒后，执行A的回调函数，在A的回调函数里面，执行了好久，时间超过了6.5秒，但是并不会执行B的回调函数，而是一定要等A的回调函数执行完之后，再执行B的回调函数</span>
<span class="token constant">A</span><span class="token function">：setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10000000000</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                i <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">6000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token constant">B</span>： <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">6500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//输出 1  3 2</span>

<span class="token comment">//特殊点二</span>
<span class="token comment">//A和B同时开始，6秒后执行A的回调函数，这时候执行一个微任务，这个异步任务的执行时间就从现在开始，但是这个微任务需要7秒后执行回调函数，而B任务的时间要到了，所以在6.5秒后执行B的回调函数，在13秒后执行微任务的回调函数</span>
<span class="token constant">A</span><span class="token function">：setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
           <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span>reject</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
               <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span> 
                   <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
               <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">7000</span><span class="token punctuation">)</span>
           <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">6000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token constant">B</span><span class="token function">：setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">6500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//输出 1 2 4</span>

<span class="token comment">//特殊3</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//这只是用来模拟new promise函数需要2秒钟完成</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> a <span class="token operator">&lt;</span> <span class="token number">10000000000</span><span class="token punctuation">;</span> a<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    a <span class="token operator">=</span> a <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">6000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">9000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//输出 1 3 2</span>

<span class="token comment">//异步任务的执行，依赖于他们的执行时间，那个时间短就先执行那个的回调函数，如果这个执行完回调函数的时间已经超过了下一个异步任务的回调函数的时间，那么也必须要等到上一个异步任务的回调函数执行完毕以后，再去执行下一个异步函数的回调任务</span>

</code></pre></div><p><strong>使用setTimeout模拟setInterval的理由</strong>：</p> <p><img src="20180901125221664.png" alt="这里写图片描述"></p> <p>上图可见，setInterval每隔100ms往队列中添加一个事件；100ms后，添加T1定时器代码至队列中，主线程中还有任务在执行，所以等待，some event执行结束后执行T1定时器代码；又过了100ms，T2定时器被添加到队列中，主线程还在执行T1代码，所以等待；又过了100ms，理论上又要往队列里推一个定时器代码，但由于此时T2还在队列中，所以T3不会被添加，结果就是此时被跳过；这里我们可以看到，T1定时器执行结束后马上执行了T2代码，所以并没有达到定时器的效果</p> <p><strong>因此，setInterval有两个缺点：</strong></p> <ul><li>使用setInterval时，某些间隔会被跳过；</li> <li>可能多个定时器会连续执行；</li></ul> <p>可以这么理解：每个setTimeout产生的任务会直接push到任务队列中；而setInterval在每次把任务push到任务队列前，都要进行一下判断(看上次的任务是否仍在队列中)</p> <p><strong>经典的例子：</strong></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>问题：是每隔1秒输出一个5 ？还是一秒后立即输出5个5？</strong></p> <p>答案是：一秒后立即输出5个5</p> <p><strong>为什么一秒后立即输出5个5？</strong>
首先JS引擎线程 要运行for循环，在每次循环中都会调用一个setTimeout函数，每个setTimeout计时结束后都会将其回调函数添加到 事件队列 中。等for循环结束后（即JS引擎线程空闲后），才开始按顺序执行事件队列中的函数</p> <p>每次循环都会在一秒后将回调函数添加到事件队列中，但由于两次相邻的循环时间是短到可以忽略不计的，所以表面看上去 一秒后立即执行了5次回调函数，即一秒后立即输出5个5</p> <p><strong>使用setTimeout模拟setInterval能够解决两个问题</strong></p> <ul><li><code>在前一个定时器执行完前，不会向队列插入新的定时器</code>（解决缺点一）</li> <li>保证定时器间隔（解决缺点二）</li></ul> <h3 id="attribute和property的区别"><a href="#attribute和property的区别" class="header-anchor">#</a> Attribute和property的区别</h3> <p><code>Attribute</code>：用于获取标签上的属性值，即标签上等号后面的值，这个等号的值是固定的，不会动态改变</p> <p><code>property</code>：当页面渲染到某一标签之后，就会产生一个element对象，这个标签上的属性名（不包括自定义属性）会进入这个element对象中，这时候这些属性名叫property。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">&lt;</span>input  type<span class="token operator">=</span><span class="token string">'t'</span> value<span class="token operator">=</span><span class="token string">'text'</span> customAttribute<span class="token operator">=</span><span class="token string">&quot;hh&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
    
 document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'input'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">'type'</span><span class="token punctuation">)</span> <span class="token comment">//得到t，只获取等号后面的值，不会改变</span>
 document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'input'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>type <span class="token comment">//得到text,property会自动补齐属性</span>

<span class="token comment">//当你输入内容，改变value值后，比如你输入了ty</span>
 document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'input'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">'value'</span><span class="token punctuation">)</span> <span class="token comment">//得到text,不会自动改变，只得到之前的值</span>
 document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'input'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value <span class="token comment">//得到ty，会根据输入的改变而改变</span>
 document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'input'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>defaultValue <span class="token comment">//得到text,得到改变之前的值</span>

 document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'input'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">'customAttribute'</span><span class="token punctuation">)</span> <span class="token comment">//得到hh</span>
 document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'input'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>customAttribute <span class="token comment">//得到undefined，property中不包括自定义属性</span>
</code></pre></div><h3 id="js文件的异步载入"><a href="#js文件的异步载入" class="header-anchor">#</a> js文件的异步载入</h3> <p>异步载入的目的是为了使页面在一开始载入的时候不出现假死的现象，因为在浏览器中渲染引擎和js引擎是互斥的，当解析文档时，发现有js文件，就会停下来解析js文件，导致dom没有继续渲染。</p> <p><code>defer关键词</code>：</p> <ul><li>当有多个文件使用defer载入时，会按先后顺序来一一载入</li> <li>只适用于外联的文件</li> <li>会在onload方法之前执行</li></ul> <div class="language-JavaScript extra-class"><pre class="language-javascript"><code><span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">&quot;text/javascript&quot;</span> defer<span class="token operator">=</span><span class="token string">&quot;defer&quot;</span> src<span class="token operator">=</span><span class="token string">&quot;https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js&quot;</span> <span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre></div><p><code>async关键词</code>:</p> <ul><li>当有多个文件采用async方法载入时，那个文件先载入是不确定的，因为是异步载入，文件的载入和执行都是无序的</li> <li>只适用于外联的文件</li> <li>会在onload方法之前执行</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">&quot;text/javascript&quot;</span> async<span class="token operator">=</span><span class="token string">&quot;async&quot;</span> src<span class="token operator">=</span><span class="token string">&quot;https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js&quot;</span> <span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre></div><h3 id="js中堆与栈"><a href="#js中堆与栈" class="header-anchor">#</a> js中堆与栈</h3> <p><code>栈内存(stack)</code>：是自动分配好内存空间的，且在代码运行的过程中释放。</p> <p>在栈内存中会提供一个空间给js代码执行，当解释器执行到了一个函数时，就会把这个函数丢入这个空间中执行，且当这个函数中调用了另外一个函数，则会把另外一个函数也压入这个栈中，同时先执行这个新的函数，这个新的函数执行完以后，再执行原先函数后面的代码。</p> <p>js中的基础数据类型String,Boolean,Number,Null,undefined,Symbol的值都保留在栈内存中，所以在执行区域被销毁后，也会把它们释放掉。而引用类型的数据类型Array和Object两种类型数据，它们的指针放在栈内存中，实际存放的位置是在堆内存中。</p> <p>栈内存的空间是有限的，当执行的内存超出了栈内存的大小，就会报栈内存溢出的错误，例如在无限循环赋值中，没有终止循环的条件。</p> <p><code>堆内存</code>：存储Object和Array的实际对象，每个对象的大小不固定。因为js中时没有类似<code>c语言</code>中的内存清理函数，堆内存中内存的释放只能依赖于垃圾回收机制。</p> <p><img src="Image_20210112174205.png" alt="Image_20210112174205"></p> <p><code>闭包</code>：闭包中的变量保存在堆内存中，因为闭包通常返回的是一个引用，只有手动将这个引用去除掉，不然其就会一直留在堆内存中。</p> <h3 id="深拷贝与浅拷贝浅讲"><a href="#深拷贝与浅拷贝浅讲" class="header-anchor">#</a> 深拷贝与浅拷贝浅讲</h3> <p><code>浅拷贝</code>:只是拷贝了一层，将第一层中简单类型的值（Boolean、Number、null、symbol、undefined、string）进行赋值，引用类型的值
（Array、Object）只拷贝其引用地址（栈内存中的地址）。</p> <p><code>深拷贝</code>:多层拷贝，循环深入的将对象中所有成员进行拷贝。一个简单的思路，传入一个对象，先通过Object.prototype.toString来判断这个对象是Array还是Object，如果是Object的话，先将要返回的对象继承传入对象的父对象。然后通过for...in循环整个对象，如果成员是array或者Object的话，则递归调用，如果不是，则直接赋值。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//不考虑对象中成员调用自身的情况</span>
       <span class="token keyword">function</span> <span class="token function">deepClone</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">'[object Array]'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">'[object Object]'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                result <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            Reflect<span class="token punctuation">.</span><span class="token function">ownKeys</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>obj<span class="token punctuation">[</span>item<span class="token punctuation">]</span> <span class="token keyword">instanceof</span> <span class="token class-name">Date</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    result<span class="token punctuation">[</span>item<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>obj<span class="token punctuation">[</span>item<span class="token punctuation">]</span><span class="token punctuation">)</span>
                <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>obj<span class="token punctuation">[</span>item<span class="token punctuation">]</span> <span class="token keyword">instanceof</span> <span class="token class-name">RegExp</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    result<span class="token punctuation">[</span>item<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span>obj<span class="token punctuation">[</span>item<span class="token punctuation">]</span><span class="token punctuation">.</span>source<span class="token punctuation">,</span> obj<span class="token punctuation">[</span>item<span class="token punctuation">]</span><span class="token punctuation">.</span>flags<span class="token punctuation">)</span>

                <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>obj<span class="token punctuation">[</span>item<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">'[object Array]'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    result<span class="token punctuation">[</span>item<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">deepClone</span><span class="token punctuation">(</span>obj<span class="token punctuation">[</span>item<span class="token punctuation">]</span><span class="token punctuation">)</span>
                <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>obj<span class="token punctuation">[</span>item<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">'[object Object]'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    result<span class="token punctuation">[</span>item<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">deepClone</span><span class="token punctuation">(</span>obj<span class="token punctuation">[</span>item<span class="token punctuation">]</span><span class="token punctuation">)</span>
                <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                    result<span class="token punctuation">[</span>item<span class="token punctuation">]</span> <span class="token operator">=</span> obj<span class="token punctuation">[</span>item<span class="token punctuation">]</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> result<span class="token punctuation">;</span>

        <span class="token punctuation">}</span>
        <span class="token keyword">let</span> d <span class="token operator">=</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token string">'2'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span>
            <span class="token literal-property property">e</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            <span class="token literal-property property">g</span><span class="token operator">:</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token literal-property property">h</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
                <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">'4'</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token literal-property property">j</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">'22'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">d</span><span class="token operator">:</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token number">777</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">[</span><span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token string">'555'</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">let</span> e <span class="token operator">=</span> <span class="token function">deepClone</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// console.log(e, d, 99);</span>
        <span class="token comment">// e.h[1].value = '777';</span>
        <span class="token comment">// console.log(e, d, 99);</span>
        <span class="token comment">// e.j.d = '222'</span>
        <span class="token comment">// console.log(e, d, 99);</span>
        <span class="token comment">// let g = ['1', 3, {</span>
        <span class="token comment">//     value: '33'</span>
        <span class="token comment">// }];</span>
        <span class="token comment">// let h = deepClone(g);</span>
        <span class="token comment">// h[2].value = '99'</span>
        <span class="token comment">// console.log(h, g, 88)</span>

</code></pre></div><h3 id="内存回收机制浅讲"><a href="#内存回收机制浅讲" class="header-anchor">#</a> 内存回收机制浅讲</h3> <p>js不像c语言一样，拥有释放内存的函数，只能通过底层的垃圾回收机制来回收内存中不需要的变量。垃圾回收机制一共有两种方式回收垃圾。</p> <p><code>引用计数算法</code>：将变量是否不在被需要转化为变量是否不在被引用，但这个方法过于老旧，只在IE7和IE8中使用，故此不在展开说明。</p> <p><code>标记清除算法</code>:  将变量是否不在被需要转化为变量是否可以被获取。每个HTML文档都会有一个<code>root</code>根，垃圾回收器会定时的从<code>root</code>根出发，找所有从根开始引用的对象（全局变量），再找这些对象的引用对象，从而获得所有可以被获得的对象和不可以被获得的对象。</p> <ul><li>垃圾回收器标在运行时记存储在内存中的所有变量</li> <li>垃圾回收器清除处在执行环境中的变量，以及引用这些变量的对象们身上的标记</li> <li>此后，身上有标记的变量即是要被销毁的变量，因为已经无法在执行环境中获取到它们</li> <li>最后，垃圾回收器销毁这些带有标记的变量，并回收它们占用的内存空间</li></ul> <h3 id="iterator遍历器"><a href="#iterator遍历器" class="header-anchor">#</a> Iterator遍历器</h3> <p>一种遍历的机制，<code>Iterator</code>可以看做是一个指针对象，在循环的时候不断的调用这个对象，可以获取到数组的每一项内容。作用有以下三点：</p> <ul><li>提供一种统一的方式来遍历j<code>avascript</code>现存的多种数据结构。</li> <li>使数据结构按照某种顺序进行排列。</li> <li>给与for...of循环支持</li></ul> <p>在以下场合会调用iterator接口：</p> <ul><li>解构赋值的时候</li> <li><code>...</code>扩展运算符的时候，这也表明了只有部署了iterator接口，才能是使用[...some]的方式将其转化为数组</li> <li>使用<code>yield</code>关键词的时候，yield其实决定了next函数中返回的value的值。</li> <li>使用数组作为参数的方法，例如<code>for...of</code>,<code>Arrary.form()</code></li></ul> <p>原生具有Iterator接口的对象有：</p> <ul><li>Array</li> <li>Map</li> <li>Set</li> <li>String</li> <li>TypedArray</li> <li>函数的 arguments 对象</li> <li>NodeList 对象</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code> <span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token punctuation">{</span>
            <span class="token comment">//iterator接口都定义在Symbol.iterator属性上，这个属性是个函数，返回一个遍历器对象</span>
            <span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token punctuation">{</span>
                    <span class="token function-variable function">next</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        <span class="token comment">//每一个遍历器对象都会有一个next方法用来返回遍历的每一项的值和是否遍历结束的判断符</span>
                        <span class="token keyword">return</span> <span class="token punctuation">{</span>
                            <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">'1'</span><span class="token punctuation">,</span> <span class="token comment">//返回遍历的每一项的值，如果到了遍历终止时，这个值为undefined</span>
                            <span class="token literal-property property">done</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">//如果当前遍历的是有值的，则返回false,如果到了遍历的最终，则返回true</span>
                        <span class="token punctuation">}</span>
                    <span class="token punctuation">}</span><span class="token punctuation">,</span>
                    <span class="token function-variable function">return</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        <span class="token comment">//这个函数用于当使用for..of进行循环时，出现了错误或者使用break等提前终止了循环，就会执行这个函数</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token comment">//部署itertor接口的一种快捷模式</span>
        <span class="token keyword">let</span> b <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token comment">//借助数组构造函数的[Symbol.iterator]来快速的部署iterator接口</span>
        b<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span>


        <span class="token comment">//使用generator函数进行包装iterator接口</span>
        <span class="token keyword">let</span> c <span class="token operator">=</span> <span class="token punctuation">{</span>
            <span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token operator">*</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">yield</span> <span class="token string">'1'</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span>item <span class="token keyword">of</span> c<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">//得到的item为‘1’</span>
        <span class="token punctuation">}</span>

        <span class="token comment">//for...of有一个特殊的地方，即循环的每一项，必须以数字作为下标</span>
        <span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        a<span class="token punctuation">.</span>foo <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> item <span class="token keyword">of</span> a<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">//得到的item为 1,2,3 是得不到4这个值，因为不会循环到foo这一项</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> item <span class="token keyword">in</span> a<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">//得到的item为 1,2,3,foo for...in比较特殊，会拿到foo这一项</span>
        <span class="token punctuation">}</span>

        <span class="token comment">//类似数组的对象的特点</span>
        <span class="token keyword">let</span> d <span class="token operator">=</span> <span class="token punctuation">{</span>
            <span class="token number">0</span><span class="token operator">:</span> <span class="token string">'1'</span><span class="token punctuation">,</span>
            <span class="token number">1</span><span class="token operator">:</span> <span class="token string">'2'</span><span class="token punctuation">,</span> <span class="token comment">//以数字作为属性名</span>
            <span class="token literal-property property">length</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token comment">//拥有length属性</span>
            <span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token operator">:</span> <span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token comment">//部署了itrerator接口后，就可以通过[...d]转为数组，以及使用for...of进行循环</span>
        <span class="token punctuation">}</span>
        <span class="token comment">//以上的对象就可以通过Array.from()转为数组</span>
</code></pre></div><h3 id="js运行过程中的错误类型"><a href="#js运行过程中的错误类型" class="header-anchor">#</a> js运行过程中的错误类型</h3> <p>浏览器会输出的错误种类：</p> <ul><li><code>EvalError</code>: 创建一个<code>error</code>实例，表示错误的原因：与<code>eval()</code>有关。</li> <li><code>RangeError</code>: 创建一个<code>error</code>实例，表示错误的原因：数值变量或参数超出其有效范围。</li> <li><code>ReferenceError</code>: 创建一个<code>error</code>实例，表示错误的原因：无效引用。</li> <li><code>SyntaxError</code>: 创建一个<code>error</code>实例，表示错误的原因：<code>eval()</code>在解析代码的过程中发生的语法错误。</li> <li><code>TypeError</code>: 创建一个<code>error</code>实例，表示错误的原因：变量或参数不属于有效类型。</li> <li><code>URIError</code>: 创建一个<code>error</code>实例，表示错误的原因：给<code>encodeURI()</code>或<code>decodeURl()</code>传递的参数无效。</li></ul> <p><code>eval()</code>：此方法为解析字符串，并执行此字符串中的代码</p> <h3 id="class对象"><a href="#class对象" class="header-anchor">#</a> class对象</h3> <p>class实际上是构造函数的语法糖</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> privateData <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">'data'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> privateMethod <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">'method'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Point</span> <span class="token punctuation">{</span>
    <span class="token comment">//Point本质上是一个构造函数，所以typeof Point 时结果是function</span>
    <span class="token comment">// 如果不写constructor的话，在new的时候会默认添加一个没有任何内容的constructor</span>
    age <span class="token operator">=</span> <span class="token string">'12'</span> <span class="token comment">//实例属性的新定义法</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">let</span> isClass <span class="token operator">=</span> <span class="token keyword">new</span><span class="token punctuation">.</span>target <span class="token comment">// new.target会返回当前的是否是使用new关键词创建的类，如果是则返回此类，即Point对象，如果不是则返undefined</span>
                                    <span class="token comment">//如果有类继承了此类，则new.tartget返回的是子类</span>
            
            <span class="token comment">//这里的参数就是new时传进来的参数</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span> <span class="token comment">//通过this将传进来的参数绑定在实例身上，this在class中默认指向实例本身</span>
        
            <span class="token comment">//constructor如果没有返回，则会默认的返回this</span>
        <span class="token punctuation">}</span>

    <span class="token comment">//在class中定义的方法并不是挂载在this上的，而是挂载在其原型上的，即point.prototype</span>
    <span class="token function">toStirngData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>age<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token function">testMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">//虽然方法不挂载在实例对象上，但是通过作用域链也能进行访问，所以在类的方法中可以通过this访问其他的方法</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">toStirngData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// 类中的所有方法都是不可以枚举的</span>
        <span class="token comment">//通过这个Object.getOwnPropertyNames(Point.prototype)可以获取</span>

    <span class="token comment">//类中的值都是可以通过set和get来设置的</span>
    <span class="token keyword">get</span> <span class="token function">testName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>age
    <span class="token punctuation">}</span>

    <span class="token keyword">set</span> <span class="token function">testName</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">+</span> name<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//静态方法，只能通过Point类来实际调用，不能通过实例对象来调用</span>
    <span class="token keyword">static</span> <span class="token function">testStatic</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span> <span class="token comment">//静态方法中的this指向的Ponit,即类本身，而不是实例对象</span>
        <span class="token punctuation">}</span>

    <span class="token comment">//静态属性的写法</span>
    <span class="token keyword">static</span> testStaticData <span class="token operator">=</span> <span class="token string">'123'</span><span class="token punctuation">;</span>

    <span class="token comment">//私有函数</span>
    <span class="token punctuation">[</span>privateMethod<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token punctuation">}</span>
    <span class="token comment">//私有方法</span>
    <span class="token punctuation">[</span>privateData<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'123'</span>

    <span class="token comment">//私有函数和属性也有这么一个提案，使用#作为标识符，进行区分</span>

<span class="token punctuation">}</span>

Point<span class="token punctuation">.</span>testStatic <span class="token comment">//静态方法的调用</span>
Point<span class="token punctuation">.</span>propertyData <span class="token operator">=</span> <span class="token string">'123'</span> <span class="token comment">//静态属性的设置</span>
<span class="token class-name">Point</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">===</span> Point <span class="token comment">//class本身指向的是它的构造函数</span>

<span class="token keyword">let</span> testObj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Point</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span> <span class="token comment">//class必须要用new来实例化</span>

testObj<span class="token punctuation">.</span><span class="token function">testMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

testObj<span class="token punctuation">.</span>testName <span class="token operator">=</span> <span class="token string">'2324'</span><span class="token punctuation">;</span>
testObj<span class="token punctuation">.</span>testName<span class="token punctuation">;</span>

<span class="token comment">//可以通过表达式的方式定义一个class</span>

<span class="token keyword">let</span> test <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">class</span> <span class="token punctuation">{</span>
        <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment">//匿名函数的写法</span>
</code></pre></div><h3 id="class对象的继承"><a href="#class对象的继承" class="header-anchor">#</a> class对象的继承</h3> <div class="language-javascript extra-class"><pre class="language-javascript"><code> <span class="token keyword">class</span> <span class="token class-name">A</span> <span class="token punctuation">{</span>
            <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">a</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>a <span class="token operator">=</span> a
            <span class="token punctuation">}</span>
            <span class="token function">testA</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
            <span class="token keyword">static</span> <span class="token function">testA2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

        <span class="token punctuation">}</span>
        <span class="token keyword">class</span> <span class="token class-name">B</span> <span class="token keyword">extends</span> <span class="token class-name">A</span> <span class="token punctuation">{</span>
            <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">super</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment">//super这一步先执行父类的构造函数，把父类的方法和属性定义在this上，这个this的指向是子类，再执行子类构造函数</span>
                <span class="token comment">//可以看做是A.prototype.constructor.call(this)</span>
                <span class="token comment">//一旦是继承，则在构造函数里必须要写super(),要不然new实例的时候就会报错   </span>
                <span class="token keyword">this</span>
                <span class="token comment">//这里的this可以得到子类和父类中所有的属性和方法</span>
            <span class="token punctuation">}</span>
            <span class="token function">testB</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">testA</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment">//在子类的普通方法中super指向父类的prototype，所以在父类构造函数中定义的方法和属性，是无法通过super来拿到，只能通过this拿到</span>
                <span class="token comment">//使用super调用时，如果涉及到了this，则this指向的是子类的实例</span>

                <span class="token keyword">super</span><span class="token punctuation">.</span>a
                <span class="token comment">//这里的super指向了父类的prototype，但是父类的prototype中没有a这个属性，所以这里得到的是undefined</span>
                <span class="token keyword">super</span><span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token string">'2'</span><span class="token punctuation">;</span>
                <span class="token comment">//这里与是上面的不同，这里不是去获取a这个属性，而是定义a这个属性，即为子类实例定义一个a变量</span>
                <span class="token comment">//等同于 this.a = '2'</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">static</span> <span class="token function">testB2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">testA2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment">//在子类的静态方法中，super指向父类，即A这个函数</span>
                <span class="token comment">//如果在调用中涉及到了this，则this表示为子类，即B这个函数</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">let</span> b <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">B</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        b <span class="token keyword">instanceof</span> <span class="token class-name">A</span> <span class="token comment">//true</span>
        b <span class="token keyword">instanceof</span> <span class="token class-name">B</span> <span class="token comment">// true</span>
        <span class="token comment">//从上可以看出子类的实例即与父类相同，也与子类相同</span>

        Object<span class="token punctuation">.</span><span class="token function">getPrototypeOf</span><span class="token punctuation">(</span><span class="token constant">B</span><span class="token punctuation">)</span><span class="token operator">===</span> <span class="token constant">A</span>
        <span class="token comment">//可以通过以上拿到父类</span>
      
</code></pre></div><p>class的两种继承</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>        <span class="token comment">//一、构造函数的继承</span>
        <span class="token constant">B</span><span class="token punctuation">.</span>__proto__ <span class="token operator">=</span> <span class="token constant">A</span>
        <span class="token comment">//即是通过</span>
        Object<span class="token punctuation">.</span><span class="token function">setPrototypeOf</span><span class="token punctuation">(</span><span class="token constant">B</span><span class="token punctuation">,</span> <span class="token constant">A</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//二、prototype的继承</span>
        <span class="token class-name">B</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>__proto__ <span class="token operator">=</span> <span class="token class-name">A</span><span class="token punctuation">.</span>prototype<span class="token punctuation">;</span>
        <span class="token comment">//即是通过</span>
        Object<span class="token punctuation">.</span><span class="token function">setPrototypeOf</span><span class="token punctuation">(</span><span class="token class-name">B</span><span class="token punctuation">.</span>prototype<span class="token punctuation">,</span> <span class="token class-name">A</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>实例的<code>_proto__</code>属性</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>        <span class="token comment">//实例的__proto__属性</span>
        <span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">A</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">let</span> b <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">B</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        b<span class="token punctuation">.</span>__proto__<span class="token punctuation">.</span>__proto__ <span class="token operator">=</span> a<span class="token punctuation">.</span>__proto__<span class="token punctuation">;</span>
</code></pre></div><p>原生构造函数的继承和基类</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>        <span class="token comment">//原生构造函数包括</span>
        <span class="token comment">/**
         * Boolean()
         *Number()
         *String()
         *Array()
         *Date()
         *Function()
         *RegExp()
         *Error()
         *Object()
         */</span>
        <span class="token keyword">class</span> <span class="token class-name">MyArray</span> <span class="token keyword">extends</span> <span class="token class-name">Array</span> <span class="token punctuation">{</span>
            <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token comment">//继承了Array函数，同时是可以写一些自己的方法，这样实例对象既有独有的方法也有Array函数的方法</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">12</span><span class="token punctuation">;</span>
        arr<span class="token punctuation">.</span>length <span class="token comment">// 1</span>

        arr<span class="token punctuation">.</span>length <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token comment">// undefined</span>

        <span class="token comment">//基类</span>
        <span class="token keyword">class</span> <span class="token class-name">C</span> <span class="token punctuation">{</span>
            <span class="token comment">//没有明确的继承可以看作是一个基类    </span>
        <span class="token punctuation">}</span>
        <span class="token comment">//实际上基类也有继承</span>
        <span class="token constant">C</span><span class="token punctuation">.</span>__proto__ <span class="token operator">=</span> <span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">;</span>
        <span class="token class-name">C</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>__proto__ <span class="token operator">=</span> <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype
</code></pre></div><h3 id="proto-、prototype和constructor"><a href="#proto-、prototype和constructor" class="header-anchor">#</a> <code>__proto__</code>、prototype和constructor</h3> <p><code>__proto__</code>：对象独有的属性，指向原型对象（构造函数的原型对象或者说<code>protoype</code>)，也可以说是由一个对象指向另外一个对象。每一个对象都有这个属性，用于形成原型链，即当获取对象内的一个属性时，先从对象本身找起，如果对象本身没有则通过<code>__proto__</code>向其父类寻找，直到找到<code>Obejct.prototype</code>中，如果还是没有，则返回null。虽然其可以获取到单前对象的原型，但是不建议通过这个来获取原型，而是通过<code>Object.getPrototypeOf</code>来获得原型。</p> <p><code>prototype</code>：函数独有的属性，构造函数的原型对象，可以说是由一个函数指向一个对象，每个对象创建的时候都会新建一个这个属性。作用是帮助实例对象获取继承的属性和方法。其内部包含一个constructor 、 <code>__proto__</code>指针和定义的方法和属性,不包括定义的实例方法和属性，同时每一个函数自身的prototype并不等于其继承的<code>Function.prototype</code>。</p> <p><code>constructor</code>：对象独有的属性，指向对象的构造函数，可以说是由一个对象指向一个函数，每个对象一定会有构造函数，这是说每一个对象都可以在本身或者通过<code>__proto__</code>来找到其构造函数，但单论属性来说，constructor属性只存在于prototype对象中，实际上构建一个函数和一个对象时，并不会用到这个字段，这个字段实际上是用来帮助寻找到该函数或者对象的构造函数</p> <p>函数是个特殊的存在，因为函数也可以看做一个对象，所以函数拥有<code>__proto__</code>、prototype和constructor。</p> <h3 id="function构造函数和object构造函数"><a href="#function构造函数和object构造函数" class="header-anchor">#</a> Function构造函数和Object构造函数</h3> <p><code>Function</code>:所有函数的构造函数，其产生的函数都继承着<code>Function.prototype</code>。</p> <p><code>Object</code>：在没有继承的情况下，所有对象的构造函数都是它，<code>Object.protoype</code>可以看做一切对象继承的源头，可以叫做源型。</p> <p>由<code>Object.prototype</code>产生<code>Function.prototype</code>,由<code>Function.prototype</code>产生Function，借由Function产生Object，然后又将<code>Object.prototype</code>指定给Object,但是<code>Object.__proto__</code>等于<code>Function.prototype</code>。</p> <p>图解：</p> <p><img src="/jsimages/20210428094152.jpg" alt="20210428094152"></p> <p>在没有继承的情况下，所有函数的<code>__proto__</code>等同于<code>Function.prototype</code>,所有函数的<code>__proto__.contructor</code>等同于Function,所有函数的<code>prototype.__prototype</code>等同于<code>Object.prototype</code></p> <p>无论继承与否所有函数的<code>contructor</code>等同于<code>Function</code></p> <p>继承情况下的解析：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">b</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">d</span> <span class="token keyword">extends</span> <span class="token class-name">b</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>d<span class="token punctuation">.</span>__proto__ <span class="token operator">===</span> b<span class="token punctuation">)</span> <span class="token comment">// true</span>
<span class="token comment">// 当继承后，继承的函数的__proto__不再指向Function.prototype,而是指向要继承的函数</span>


console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>d<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token class-name">__proto__</span><span class="token punctuation">.</span>constructor <span class="token operator">===</span> b<span class="token punctuation">)</span> <span class="token comment">// true</span>


console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>d<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>__proto__ <span class="token operator">===</span> b<span class="token punctuation">.</span>prototype<span class="token punctuation">)</span> <span class="token comment">// true</span>


console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>d<span class="token punctuation">.</span>constructor <span class="token operator">===</span> b<span class="token punctuation">)</span> <span class="token comment">// false</span>


console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>d<span class="token punctuation">.</span>constructor <span class="token operator">===</span> Function<span class="token punctuation">)</span> <span class="token comment">// true</span>
<span class="token comment">// 所有函数的contructor等同于Function</span>


console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">.</span>__proto__ <span class="token operator">===</span> Function<span class="token punctuation">)</span> <span class="token comment">// false</span>
</code></pre></div><h3 id="原型链和原型"><a href="#原型链和原型" class="header-anchor">#</a> 原型链和原型</h3> <p>原型链即多个原型连接起来的对象</p> <div class="language-javaScript extra-class"><pre class="language-javascript"><code><span class="token comment">// 继承的手写版本</span>
        <span class="token keyword">function</span> <span class="token constant">A</span><span class="token punctuation">(</span><span class="token parameter">a</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>a <span class="token operator">=</span> a<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token class-name">A</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">testA</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'222'</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>

        <span class="token keyword">function</span> <span class="token constant">B</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token constant">A</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> a<span class="token punctuation">)</span> <span class="token comment">//调用A，同时使this指向B，这样就使得b的实例对象拥有A的实例属性</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>b <span class="token operator">=</span> b<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        Object<span class="token punctuation">.</span><span class="token function">setPrototypeOf</span><span class="token punctuation">(</span><span class="token class-name">B</span><span class="token punctuation">.</span>prototype<span class="token punctuation">,</span> <span class="token class-name">A</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//开启继承，使B的原型链接到A的原型，实现继承</span>
        <span class="token keyword">let</span> b <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">B</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//原型链</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">getPrototypeOf</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token class-name">B</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">getPrototypeOf</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">getPrototypeOf</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token class-name">A</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">getPrototypeOf</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">getPrototypeOf</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">getPrototypeOf</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="new的作用"><a href="#new的作用" class="header-anchor">#</a> new的作用</h3> <ul><li>new的时候通过构造函数产生了一个实例对象，这个实例对象上拥有构造函数的所有属性和方法。</li> <li>new的时候产生的实例对象可以通过<code>__proto__</code>获取到构造函数的原型（prototype），<code>new</code>关键词将实例对象和构造函数的原型对象链接在了一起。</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//在这一步new做了四件事： 1.创建了一个空的{}；</span>
                     <span class="token comment">//                    2.将这个空的{}与Object.prototype链接在一起</span>
                     <span class="token comment">//                    3.将this指绑定给这个空的{}</span>
                     <span class="token comment">//                    4.将这个空{}对象返回</span>
</code></pre></div><p><strong>new一个对象，到底发生什么？</strong></p> <ul><li><p>创建一个对象，该对象的原型指向构造函数的原型</p></li> <li><p>调用该构造函数，构造函数的this指向新生成的对象</p></li> <li><p>判断构造函数是否有返回值，如果有返回值且返回值是一个对象或一个方法，则返回该值；否则返回新生成的对象</p></li></ul> <p>手动创建一个new方法，解释上面的4个步骤：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>  <span class="token keyword">function</span> <span class="token function">testNew</span><span class="token punctuation">(</span><span class="token parameter">constructor<span class="token punctuation">,</span> <span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">//constructor 表示传进来的构造函数</span>
            <span class="token comment">//args 表示传进来的初始化参数</span>

            <span class="token comment">//首先先创建一个空对象</span>
            <span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
            <span class="token comment">//使用Object.setPrototypeOf来链接这个空对象和构造函数的原型</span>
            Object<span class="token punctuation">.</span><span class="token function">setPrototypeOf</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> constructor<span class="token punctuation">.</span>prototype<span class="token punctuation">)</span>
            <span class="token comment">//执行构造函数并通过call改变构造函数中this的指向，使构造函数中的方法和属性绑定到obj上</span>
            <span class="token keyword">let</span> res <span class="token operator">=</span> <span class="token function">constructor</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//判断构造函数的返回，如果是对象则返回其，如果不是则返回obj对象</span>
            <span class="token keyword">return</span> res <span class="token keyword">instanceof</span> <span class="token class-name">Object</span> <span class="token operator">?</span> res <span class="token operator">:</span> obj
        <span class="token punctuation">}</span>

        <span class="token keyword">function</span> <span class="token constant">A</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token function">testNew</span><span class="token punctuation">(</span><span class="token constant">A</span><span class="token punctuation">,</span> <span class="token number">2233</span><span class="token punctuation">)</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token number">99</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="_4个优雅的逻辑运算符"><a href="#_4个优雅的逻辑运算符" class="header-anchor">#</a> 4个优雅的逻辑运算符</h3> <p><code>？.</code>:存在判断符</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment">//当想要判断数组a存在，且数组a的第一位即a[0]存在时候</span>
<span class="token keyword">if</span><span class="token punctuation">(</span>a<span class="token operator">?.</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
<span class="token punctuation">}</span>
<span class="token comment">//此逻辑运算符有一特性，即当获取到不存在的对象时，就终止逻辑，不在执行</span>
<span class="token keyword">let</span> c <span class="token operator">=</span> a<span class="token operator">?.</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">//当数组a和a[0]都存在时，c就等于a[0]，而其中有一个不存在时，c就为空值</span>
</code></pre></div><p><code>??</code>：默认赋值符</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> c <span class="token operator">=</span> a<span class="token operator">?.</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">??</span> <span class="token string">'c'</span> <span class="token comment">//当a和a[0]都存在时，c等于a[0]，否则c等于’c‘</span>
</code></pre></div><p><code>??=</code>:空值赋值符</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>a<span class="token operator">??=</span> y<span class="token punctuation">;</span>
<span class="token comment">//仅当左侧为null值或者undefined时，将右侧赋值给左侧，即当a为null值或者undefined时,a=y,y也可以是一个函数</span>

</code></pre></div><p><code>||=</code>:与逻辑赋值</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>a<span class="token operator">||=</span>y<span class="token punctuation">;</span>
<span class="token comment">//仅当左侧为虚值（null，undefined，空字符串，单引号，双引号，0，NAN）时，将右侧赋值给左侧</span>
</code></pre></div><p><code>&amp;&amp;=</code>:或逻辑赋值</p> <div class="language-JavaScript extra-class"><pre class="language-javascript"><code>a<span class="token operator">&amp;&amp;=</span>y
<span class="token comment">//仅当右侧为真值时，将右侧的值赋予左侧</span>
</code></pre></div><h3 id="协商缓存和强缓存"><a href="#协商缓存和强缓存" class="header-anchor">#</a> 协商缓存和强缓存</h3> <p>强缓存指的是当响应头返回的内容中有expires(过期时间),或者cache-Control(max-age=600过期时间为600分钟)时浏览器就会将资源文件进行缓存，返回的code是200.如果是图像、网页等资源会存储在硬盘中，操作系统等文件就会放在内存中,但是不一定，实际上是浏览器自动分配资源放置在哪里。</p> <p>当强缓存没有命中，则启动协商缓存，即携带缓存标识向服务端发起请求，由服务端决定是否启用缓存。实际上是服务器端响应一个请求时，在返回的响应头中带有<code>Etag</code>字段，是返回的资源的唯一标识，当再次去请求这个请求时，就会在请求头的if-none-Match字段中带上<code>Etag</code>的标识，然后服务器端判断如果这个值和服务器端的值一样，则返回<code>code:304</code>,浏览器直接使用本地缓存。如果不一样，则返回新的资源和<code>code:200</code></p> <p>当第一次访问请求的时候,浏览器先判断这个请求是否有缓存,如果没有则向服务端发起请求，服务端返回的响应头中如果带有expires字段**(这个字段的值为一个时间，例如20200708 18:32:45,表明这个请求的缓存内容在这个时间段后失效,缓存被清除)<strong>或者cache-Control字段</strong>(max-age=600 表明这个请求的过期时间为600分钟，600分钟后清除这个缓存)<strong>则告诉浏览器要对这个请求的内容及缓存标识</strong>（Etag:服务端会在响应头中加入这个字段，是返回资源的唯一标识；Last-Modified:也存在于响应头中，用来表明返回资源最后的修改时间）**进行缓存，返回的code为200,且如果是图像、网页等资源会存储在硬盘中，操作系统等文件就会放在内存中,但是不一定，实际上是浏览器自动分配资源放置在哪里。</p> <p>当第二次访问同一个请求时，浏览器发现有这个请求的缓存，就会去执行强缓存的判断，即先<strong>判断expries或者cache-Control的时间是否已经过期</strong>，如果没有过期，则直接返回<code>code:200</code>,然后调用缓存内的数据。如果发现时间已经过期，则开启协商缓存。</p> <p>协商缓存就是带着缓存标识符去向服务器端发起请求,缓存标识符附加在请求头中，Etag缓存标识符用if-none-match来代表(即if-none-match:Etag的值)，Last-Modified缓存标识符用 If-Modified-Since代表(即 If-Modified-Since:Last-Modified的值)，服务器端接受到这个请求后就去判断传来的if-none-match值是否和服务器端保存的一致或者传来的If-Modified-Since是否和服务器端保持一致，如果保持一致，说明资源没有发生改变，则返回<code>code:304</code>，浏览器就会从缓存中读取数据。如果不一致，则返回新的资源和缓存标识符，以及code:200，浏览器就会再次把请求的内容和缓存标识符缓存起来。</p> <p><strong>在第二次访问同一个请求的时候，如果命中强缓存，则不会去向服务端发起请求，而执行协商缓存的话，就会去向服务端发起请求。</strong></p> <p>前端通过Ajax执行缓存的方式：</p> <ul><li>xhr.setRequestHeader('cache-Control','max-age=0‘);执行强缓存</li> <li>xhr.setRequestHeader('If-Modified-Since','0‘);执行协商缓存</li></ul> <p><img src="C:%5CUsers%5CLY%5CDesktop%5C%E7%BC%93%E5%AD%98.jpg" alt="缓存"></p></div></section> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/my-press/" class="prev router-link-active">
          学前必读
        </a></span> <!----></p></div> <div class="comments-wrapper"><!----></div></main></div> <!----></div> <ul class="sub-sidebar sub-sidebar-wrapper" style="width:12rem;" data-v-20d098af data-v-e497687c><li class="level-3" data-v-20d098af><a href="/my-press/javascriptbook/jsrecord.html#隐式转换" class="sidebar-link reco-side-隐式转换" data-v-20d098af>隐式转换</a></li><li class="level-3" data-v-20d098af><a href="/my-press/javascriptbook/jsrecord.html#数值的扩展" class="sidebar-link reco-side-数值的扩展" data-v-20d098af>数值的扩展</a></li><li class="level-3" data-v-20d098af><a href="/my-press/javascriptbook/jsrecord.html#对象的扩展" class="sidebar-link reco-side-对象的扩展" data-v-20d098af>对象的扩展</a></li><li class="level-3" data-v-20d098af><a href="/my-press/javascriptbook/jsrecord.html#数组的扩展" class="sidebar-link reco-side-数组的扩展" data-v-20d098af>数组的扩展</a></li><li class="level-3" data-v-20d098af><a href="/my-press/javascriptbook/jsrecord.html#函数的扩展" class="sidebar-link reco-side-函数的扩展" data-v-20d098af>函数的扩展</a></li><li class="level-3" data-v-20d098af><a href="/my-press/javascriptbook/jsrecord.html#字符串的扩展" class="sidebar-link reco-side-字符串的扩展" data-v-20d098af>字符串的扩展</a></li><li class="level-3" data-v-20d098af><a href="/my-press/javascriptbook/jsrecord.html#字符串新增的方法" class="sidebar-link reco-side-字符串新增的方法" data-v-20d098af>字符串新增的方法</a></li><li class="level-3" data-v-20d098af><a href="/my-press/javascriptbook/jsrecord.html#正则" class="sidebar-link reco-side-正则" data-v-20d098af>正则</a></li><li class="level-3" data-v-20d098af><a href="/my-press/javascriptbook/jsrecord.html#解构赋值的原理" class="sidebar-link reco-side-解构赋值的原理" data-v-20d098af>解构赋值的原理</a></li><li class="level-3" data-v-20d098af><a href="/my-press/javascriptbook/jsrecord.html#module的使用" class="sidebar-link reco-side-module的使用" data-v-20d098af>module的使用</a></li><li class="level-3" data-v-20d098af><a href="/my-press/javascriptbook/jsrecord.html#module的加载实现" class="sidebar-link reco-side-module的加载实现" data-v-20d098af>module的加载实现</a></li><li class="level-3" data-v-20d098af><a href="/my-press/javascriptbook/jsrecord.html#装饰器的使用-可能会有大变" class="sidebar-link reco-side-装饰器的使用-可能会有大变" data-v-20d098af>装饰器的使用（可能会有大变）</a></li><li class="level-3" data-v-20d098af><a href="/my-press/javascriptbook/jsrecord.html#apply、call和bind的使用" class="sidebar-link reco-side-apply、call和bind的使用" data-v-20d098af>apply、call和bind的使用</a></li><li class="level-3" data-v-20d098af><a href="/my-press/javascriptbook/jsrecord.html#this指针" class="sidebar-link reco-side-this指针" data-v-20d098af>this指针</a></li><li class="level-3" data-v-20d098af><a href="/my-press/javascriptbook/jsrecord.html#原生ajax写法" class="sidebar-link reco-side-原生ajax写法" data-v-20d098af>原生Ajax写法</a></li><li class="level-3" data-v-20d098af><a href="/my-press/javascriptbook/jsrecord.html#promise异步函数" class="sidebar-link reco-side-promise异步函数" data-v-20d098af>promise异步函数</a></li><li class="level-3" data-v-20d098af><a href="/my-press/javascriptbook/jsrecord.html#async-await语法糖" class="sidebar-link reco-side-async-await语法糖" data-v-20d098af>async/await语法糖</a></li><li class="level-3" data-v-20d098af><a href="/my-press/javascriptbook/jsrecord.html#generator函数" class="sidebar-link reco-side-generator函数" data-v-20d098af>Generator函数</a></li><li class="level-3" data-v-20d098af><a href="/my-press/javascriptbook/jsrecord.html#箭头函数" class="sidebar-link reco-side-箭头函数" data-v-20d098af>箭头函数</a></li><li class="level-3" data-v-20d098af><a href="/my-press/javascriptbook/jsrecord.html#symbol类型" class="sidebar-link reco-side-symbol类型" data-v-20d098af>symbol类型</a></li><li class="level-3" data-v-20d098af><a href="/my-press/javascriptbook/jsrecord.html#proxy代理对象" class="sidebar-link reco-side-proxy代理对象" data-v-20d098af>proxy代理对象</a></li><li class="level-3" data-v-20d098af><a href="/my-press/javascriptbook/jsrecord.html#reflect对象" class="sidebar-link reco-side-reflect对象" data-v-20d098af>reflect对象</a></li><li class="level-3" data-v-20d098af><a href="/my-press/javascriptbook/jsrecord.html#set数据类型" class="sidebar-link reco-side-set数据类型" data-v-20d098af>set数据类型</a></li><li class="level-3" data-v-20d098af><a href="/my-press/javascriptbook/jsrecord.html#weakset类型" class="sidebar-link reco-side-weakset类型" data-v-20d098af>weakSet类型</a></li><li class="level-3" data-v-20d098af><a href="/my-press/javascriptbook/jsrecord.html#map数据类型" class="sidebar-link reco-side-map数据类型" data-v-20d098af>Map数据类型</a></li><li class="level-3" data-v-20d098af><a href="/my-press/javascriptbook/jsrecord.html#weakmap数据类型" class="sidebar-link reco-side-weakmap数据类型" data-v-20d098af>weakMap数据类型</a></li><li class="level-3" data-v-20d098af><a href="/my-press/javascriptbook/jsrecord.html#闭包" class="sidebar-link reco-side-闭包" data-v-20d098af>闭包</a></li><li class="level-3" data-v-20d098af><a href="/my-press/javascriptbook/jsrecord.html#节流与防抖" class="sidebar-link reco-side-节流与防抖" data-v-20d098af>节流与防抖</a></li><li class="level-3" data-v-20d098af><a href="/my-press/javascriptbook/jsrecord.html#全局变量污染" class="sidebar-link reco-side-全局变量污染" data-v-20d098af>全局变量污染</a></li><li class="level-3" data-v-20d098af><a href="/my-press/javascriptbook/jsrecord.html#匿名函数和自执行函数" class="sidebar-link reco-side-匿名函数和自执行函数" data-v-20d098af>匿名函数和自执行函数</a></li><li class="level-3" data-v-20d098af><a href="/my-press/javascriptbook/jsrecord.html#eventloop-事件循环" class="sidebar-link reco-side-eventloop-事件循环" data-v-20d098af>EventLoop（事件循环）</a></li><li class="level-3" data-v-20d098af><a href="/my-press/javascriptbook/jsrecord.html#js的事件流" class="sidebar-link reco-side-js的事件流" data-v-20d098af>JS的事件流</a></li><li class="level-3" data-v-20d098af><a href="/my-press/javascriptbook/jsrecord.html#js的事件委托" class="sidebar-link reco-side-js的事件委托" data-v-20d098af>JS的事件委托</a></li><li class="level-3" data-v-20d098af><a href="/my-press/javascriptbook/jsrecord.html#settimeout和setinterval的特点" class="sidebar-link reco-side-settimeout和setinterval的特点" data-v-20d098af>setTimeout和setInterval的特点</a></li><li class="level-3" data-v-20d098af><a href="/my-press/javascriptbook/jsrecord.html#attribute和property的区别" class="sidebar-link reco-side-attribute和property的区别" data-v-20d098af>Attribute和property的区别</a></li><li class="level-3" data-v-20d098af><a href="/my-press/javascriptbook/jsrecord.html#js文件的异步载入" class="sidebar-link reco-side-js文件的异步载入" data-v-20d098af>js文件的异步载入</a></li><li class="level-3" data-v-20d098af><a href="/my-press/javascriptbook/jsrecord.html#js中堆与栈" class="sidebar-link reco-side-js中堆与栈" data-v-20d098af>js中堆与栈</a></li><li class="level-3" data-v-20d098af><a href="/my-press/javascriptbook/jsrecord.html#深拷贝与浅拷贝浅讲" class="sidebar-link reco-side-深拷贝与浅拷贝浅讲" data-v-20d098af>深拷贝与浅拷贝浅讲</a></li><li class="level-3" data-v-20d098af><a href="/my-press/javascriptbook/jsrecord.html#内存回收机制浅讲" class="sidebar-link reco-side-内存回收机制浅讲" data-v-20d098af>内存回收机制浅讲</a></li><li class="level-3" data-v-20d098af><a href="/my-press/javascriptbook/jsrecord.html#iterator遍历器" class="sidebar-link reco-side-iterator遍历器" data-v-20d098af>Iterator遍历器</a></li><li class="level-3" data-v-20d098af><a href="/my-press/javascriptbook/jsrecord.html#js运行过程中的错误类型" class="sidebar-link reco-side-js运行过程中的错误类型" data-v-20d098af>js运行过程中的错误类型</a></li><li class="level-3" data-v-20d098af><a href="/my-press/javascriptbook/jsrecord.html#class对象" class="sidebar-link reco-side-class对象" data-v-20d098af>class对象</a></li><li class="level-3" data-v-20d098af><a href="/my-press/javascriptbook/jsrecord.html#class对象的继承" class="sidebar-link reco-side-class对象的继承" data-v-20d098af>class对象的继承</a></li><li class="level-3" data-v-20d098af><a href="/my-press/javascriptbook/jsrecord.html#proto-、prototype和constructor" class="sidebar-link reco-side-proto-、prototype和constructor" data-v-20d098af>__proto__、prototype和constructor</a></li><li class="level-3" data-v-20d098af><a href="/my-press/javascriptbook/jsrecord.html#function构造函数和object构造函数" class="sidebar-link reco-side-function构造函数和object构造函数" data-v-20d098af>Function构造函数和Object构造函数</a></li><li class="level-3" data-v-20d098af><a href="/my-press/javascriptbook/jsrecord.html#原型链和原型" class="sidebar-link reco-side-原型链和原型" data-v-20d098af>原型链和原型</a></li><li class="level-3" data-v-20d098af><a href="/my-press/javascriptbook/jsrecord.html#new的作用" class="sidebar-link reco-side-new的作用" data-v-20d098af>new的作用</a></li><li class="level-3" data-v-20d098af><a href="/my-press/javascriptbook/jsrecord.html#_4个优雅的逻辑运算符" class="sidebar-link reco-side-_4个优雅的逻辑运算符" data-v-20d098af>4个优雅的逻辑运算符</a></li><li class="level-3" data-v-20d098af><a href="/my-press/javascriptbook/jsrecord.html#协商缓存和强缓存" class="sidebar-link reco-side-协商缓存和强缓存" data-v-20d098af>协商缓存和强缓存</a></li></ul></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-2a01419c data-v-2a01419c><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-2a01419c><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-2a01419c></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-2a01419c></path></svg></div></div></div>
    <script src="/my-press/assets/js/app.8d356eaa.js" defer></script><script src="/my-press/assets/js/3.b7feb53a.js" defer></script><script src="/my-press/assets/js/1.6aad5a55.js" defer></script><script src="/my-press/assets/js/11.c69e7abf.js" defer></script>
  </body>
</html>
